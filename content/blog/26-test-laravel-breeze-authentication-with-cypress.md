---
id: 26
published: false
title: Test Laravel Breeze Authentication With Cypress
date: October 18th, 2022
description: Add your first Cypress tests on Laravel Breeze Authentication
tags: [Laravel]
announcement_banner:
announcement_link:
---

This post shows some examples that are pretty easy to add to any project 
that uses **Laravel Breeze**

## Install **Laracast/Cypress** package.

**Frontend package**

```shell
npm install cypress --save-dev

composer require laracasts/cypress --dev

php artisan cypress:boilerplate
```

In order to open Cypress

```shell
npx cypress open
```

**(Optional)** Set a database for cypress tests

```dotenv
DB_CONNECTION=mysql
DB_DATABASE=cypress
```

---

## Test Login

**Take in mind** user factories from **Laravel** sets user password generated by factories as `password`

```javascript
describe('Authentication test', () => {
    it('tests a success manual authentication with the login form', () => {
        cy.visit(`/login`);

        cy.php(`
            App\\Models\\User::factory()->create(['email', 'john@doe.com']);
        `).then(user => {
            cy.get('input[type="email"]').type(user.email);
            cy.get('input[type="password"]').type('password');
        });

        cy.get('button[type="submit"]').click();

        cy.location('pathname').should('equal', '/dashboard');
    });
});
```

Some interesting ideas could be

**Test http status code**

```javascript
cy.request('http://localhost:8000/dashboard')
    .then((response) => expect(response.status).to.eq(200));
```

**Test a middleware**

```javascript
// visit a url
cy.visit('http://localhost:8000/dashboard');
// check the next url location
cy.url().should('match', '/login');
```

Sometimes is required to test a larger workflow like **logout** and then check that some middleware

```javascript
cy.visit('/logout') // I got you cover, it would do the magic
```

**Check some content**

**Take in mind** you should avoid testing texts that could be escaped, 
with that said, you can test something like a welcome message in the `/dashboard` url

```javascript
cy.contains('Welcome');
```

Or even better, use the convenient `login` method to test exactly the current user welcome message

```javascript
cy.login({ email: 'john@doe.com', name: 'John Doe' });
cy.visit('/dashboard').contains('Welcome Back, John Doe');
```

Hopefully this examples, helps to provide enough guide to create you own tests for your applications

Thanks for reading!
