{"_path":"/blog/22-set-xdebug-coverage-for-laravel","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Set XDebug Coverage For Laravel","description":"Start using Test Coverage For a Laravel Project","id":22,"published":true,"date":"March 28th, 2022","tags":["Laravel"],"announcement_banner":null,"announcement_link":null,"readingTime":{"text":"1 min read","minutes":0.89,"time":53400,"words":178},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Laravel 9"}]}]},{"type":"text","value":" implement a new feature added by "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Nuno Maduro"}]},{"type":"text","value":" to get code coverage,\nthe command is "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"php artisan test --coverage"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This post explains how to set "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"xdebug"}]},{"type":"text","value":" locally in a "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"MacOS"}]},{"type":"text","value":" environment"}]},{"type":"element","tag":"h2","props":{"id":"check-that-you-have-installed-xdebug"},"children":[{"type":"text","value":"Check that you have installed Xdebug"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In your local environment you can run"}]},{"type":"element","tag":"pre","props":{"className":"language-shell dracula","code":"php -v\n","language":"shell","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"-v"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You should be able to see the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"PHP"}]},{"type":"text","value":" version, but also more data like "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"xdebug version"}]},{"type":"text","value":" installed locally"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Shell Screen Showing XDebug Details","src":"/images/blog/20/shell-screen.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you have not installed "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"XDEBUG"}]},{"type":"text","value":" here you would find "},{"type":"element","tag":"a","props":{"href":"/blog/19-install-xdebug-in-macos"},"children":[{"type":"text","value":"How to install xdebug"}]}]},{"type":"element","tag":"hr","props":{"id":""},"children":[]},{"type":"element","tag":"h2","props":{"id":"get-phpini-file-location"},"children":[{"type":"text","value":"Get "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"PHP.ini"}]},{"type":"text","value":" file location"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then to check the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"php.ini"}]},{"type":"text","value":" file location (it changes from different php versions) run"}]},{"type":"element","tag":"pre","props":{"className":"language-shell dracula","code":"php --ini\n","language":"shell","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"--ini"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the second line the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"php.ini"}]},{"type":"text","value":" file location"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Shell Screen Showing php.ini File Details","src":"/images/blog/20/shell-screen-2.png"},"children":[]}]},{"type":"element","tag":"hr","props":{"id":"_1"},"children":[]},{"type":"element","tag":"h2","props":{"id":"set-xdebug-mode"},"children":[{"type":"text","value":"Set Xdebug mode"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Grab the file location and edit the "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"php.ini"}]},{"type":"text","value":" file:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell dracula","code":"## Command to open files with vscode... it is easier\ncode /usr/local/etc/php/8.0/php.ini\n\n## or\n\nnano /usr/local/etc/php/8.0/php.ini\n","language":"shell","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-784317"},"children":[{"type":"text","value":"## Command to open files with vscode... it is easier\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"/usr/local/etc/php/8.0/php.ini\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-784317"},"children":[{"type":"text","value":"## or\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"nano"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"/usr/local/etc/php/8.0/php.ini"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then add at the very bottom this line:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell dracula","code":"xdebug.mode=develop,debug,coverage\n","language":"shell","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"xdebug.mode"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"=develop,debug,coverage"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you are able to run"}]},{"type":"element","tag":"pre","props":{"className":"language-shell dracula","code":"php artisan test --coverage\n","language":"shell","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"artisan"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"--coverage"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"and it should work and return a test coverage output"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Shell Screen Showing Test Coverage Output in a Laravel App","src":"/images/blog/20/shell-screen-3.png"},"children":[]}]},{"type":"element","tag":"hr","props":{"id":"_2"},"children":[]},{"type":"element","tag":"h2","props":{"id":"excluding-framework-files"},"children":[{"type":"text","value":"Excluding Framework files"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"test --coverage"}]},{"type":"text","value":" command would return a percentage of coverage,\nin order to exclude this files to just test your own code implementations in "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"phpunit.xml"}]},{"type":"text","value":" file"}]},{"type":"element","tag":"pre","props":{"className":"language-xml dracula","code":"<coverage processUncoveredFiles=\"true\">\n    <include>\n        <directory suffix=\".php\">./app</directory>\n    </include>\n    <exclude>\n        <directory suffix=\".php\">./app/Macros</directory>\n        <file>./app/Http/Middleware/Authenticate.php</file>\n        <file>./app/Http/Middleware/RedirectIfAuthenticated.php</file>\n        <file>./app/Http/Middleware/TrustHosts.php</file>\n        <file>./app/Http/Middleware/TrustProxies.php</file>\n        <file>./app/Providers/BroadcastServiceProvider.php</file>\n        <file>./app/Providers/HorizonServiceProvider.php</file>\n        <file>./app/Providers/TelescopeServiceProvider.php</file>\n    </exclude>\n</coverage>\n","language":"xml","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"coverage"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-711501"},"children":[{"type":"text","value":"processUncoveredFiles"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-882767"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-882767"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"directory"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-711501"},"children":[{"type":"text","value":"suffix"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-882767"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":".php"}]},{"type":"element","tag":"span","props":{"class":"ct-882767"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"directory"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"include"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"exclude"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"directory"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-711501"},"children":[{"type":"text","value":"suffix"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-882767"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":".php"}]},{"type":"element","tag":"span","props":{"class":"ct-882767"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Macros</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"directory"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Http/Middleware/Authenticate.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Http/Middleware/RedirectIfAuthenticated.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Http/Middleware/TrustHosts.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Http/Middleware/TrustProxies.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Providers/BroadcastServiceProvider.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Providers/HorizonServiceProvider.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">./app/Providers/TelescopeServiceProvider.php</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"file"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"exclude"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-166232"},"children":[{"type":"text","value":"coverage"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":">"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thanks for reading! and "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"may the code coverage be with you"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".dracula{color:#F8F8F2;background:#282A36;}.ct-711500{color:#50FA7B;}.ct-183901{color:#F8F8F2;}.ct-531774{color:#BD93F9;}.ct-784317{color:#6272A4;}.ct-035036{color:#F1FA8C;}.ct-166232{color:#FF79C6;}.ct-711501{color:#50FA7B;font-style:italic;}.ct-882767{color:#E9F284;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"check-that-you-have-installed-xdebug","depth":2,"text":"Check that you have installed Xdebug"},{"id":"get-phpini-file-location","depth":2,"text":"Get PHP.ini file location"},{"id":"set-xdebug-mode","depth":2,"text":"Set Xdebug mode"},{"id":"excluding-framework-files","depth":2,"text":"Excluding Framework files"}]}},"_type":"markdown","_id":"content:blog:22-set-xdebug-coverage-for-laravel.md","_source":"content","_file":"blog/22-set-xdebug-coverage-for-laravel.md","_extension":"md"}