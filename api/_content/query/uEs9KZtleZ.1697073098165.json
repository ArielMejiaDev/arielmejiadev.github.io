{"_path":"/blog/14-fix-reflection-exception-class-env-does-not-exists","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Fix Reflection Exception Class Env Does Not Exist","description":"Sometimes Telescope got an exception while tests are running... fix it with only one command","id":14,"published":true,"date":"November 12th, 2020","cover_image":null,"tags":["Laravel"],"announcement_banner":null,"announcement_link":null,"readingTime":{"text":"1 min read","minutes":0.505,"time":30300,"words":101},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"the-problem"},"children":[{"type":"text","value":"The problem:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Laravel/Telescope"}]},{"type":"text","value":" while running your tests with"}]},{"type":"element","tag":"pre","props":{"className":"language-php dracula","code":"php artisan test\n","language":"php","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"artisan"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"test"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then console throws this exception"}]},{"type":"element","tag":"pre","props":{"className":"language-bash dracula","code":"ReflectionException: Class env does not exist\n","language":"bash","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-711500"},"children":[{"type":"text","value":"ReflectionException:"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"Class"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"does"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"not"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-035036"},"children":[{"type":"text","value":"exist"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below it says that something in test environment fails with "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"Telescope"}]},{"type":"text","value":",\nI didn't change any code base or "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"environment"}]},{"type":"text","value":" so..."}]},{"type":"element","tag":"h2","props":{"id":"solution"},"children":[{"type":"text","value":"Solution"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step 1"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Disable telescope for tests on your PHPUnit.xml add:"}]},{"type":"element","tag":"pre","props":{"className":"language-XML dracula","code":"<env name=\"TELESCOPE_ENABLED\" value=\"false\"/>\n","language":"XML","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"<env name=\"TELESCOPE_ENABLED\" value=\"false\"/>"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Step 2"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then go to the terminal and execute:"}]},{"type":"element","tag":"pre","props":{"className":"language-php dracula","code":"php artisan clear\nphp artisan config:clear\n","language":"php","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"artisan"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"clear\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"artisan"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"class":"ct-183901"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-531774"},"children":[{"type":"text","value":"clear"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Credits"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I get the solution from two sites:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This "},{"type":"element","tag":"a","props":{":target":"_blank","href":"https://github.com/laravel/telescope/issues/347","rel":["nofollow"]},"children":[{"type":"text","value":"github issue"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"And from the "},{"type":"element","tag":"a","props":{":target":"_blank","href":"https://dcblog.dev/laravel-telescope-error-when-running-tests-reflectionexception-class-env-does-not-exist","rel":["nofollow"]},"children":[{"type":"text","value":"David Carr blog"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I only facilitate the information in this platform because\nI had a few hours searching for a solution, and it makes easier to search for anyone in the future."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thanks for reading!"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":".dracula{color:#F8F8F2;background:#282A36;}.ct-531774{color:#BD93F9;}.ct-183901{color:#F8F8F2;}.ct-711500{color:#50FA7B;}.ct-035036{color:#F1FA8C;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"the-problem","depth":2,"text":"The problem:"},{"id":"solution","depth":2,"text":"Solution"}]}},"_type":"markdown","_id":"content:blog:14-fix-reflection-exception-class-env-does-not-exists.md","_source":"content","_file":"blog/14-fix-reflection-exception-class-env-does-not-exists.md","_extension":"md"}