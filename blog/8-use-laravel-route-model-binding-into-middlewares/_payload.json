[{"data":1,"prerenderedAt":613},["Reactive",2],{"post-8-use-laravel-route-model-binding-into-middlewares":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"id":10,"published":11,"date":12,"cover_image":13,"tags":14,"announcement_banner":16,"announcement_link":16,"readingTime":17,"body":22,"_type":608,"_id":609,"_source":610,"_file":611,"_extension":612},"/blog/8-use-laravel-route-model-binding-into-middlewares","blog",false,"","Use route model binding on Middlewares in Laravel","How do you handle a route model binding on Middleware",8,true,"July 18th, 2020","https://dev-to-uploads.s3.amazonaws.com/i/2gkj91aqrqtznh945eo7.png",[15],"Laravel",null,{"text":18,"minutes":19,"time":20,"words":21},"1 min read",0.825,49500,165,{"type":23,"children":24,"toc":605},"root",[25,53,60,112,129,139,544,548,565,569,594,599],{"type":26,"tag":27,"props":28,"children":29},"element","p",{},[30,37,39,43,45,51],{"type":26,"tag":31,"props":32,"children":33},"strong",{},[34],{"type":35,"value":36},"text","Route Model Binding",{"type":35,"value":38}," is a feature that allows the ",{"type":26,"tag":31,"props":40,"children":41},{},[42],{"type":35,"value":15},{"type":35,"value":44}," Container\nto resolve a ",{"type":26,"tag":46,"props":47,"children":48},"code",{},[49],{"type":35,"value":50},"model",{"type":35,"value":52}," instance by a route param automatically.",{"type":26,"tag":54,"props":55,"children":57},"h2",{"id":56},"create-a-middleware",[58],{"type":35,"value":59},"Create a middleware",{"type":26,"tag":61,"props":62,"children":66},"pre",{"className":63,"code":64,"language":65,"meta":7},"language-shell dracula","php artisan make:middleware UserMiddleware\n","shell",[67],{"type":26,"tag":46,"props":68,"children":69},{"__ignoreMap":7},[70],{"type":26,"tag":71,"props":72,"children":75},"span",{"class":73,"line":74},"line",1,[76,82,88,94,98,103,107],{"type":26,"tag":71,"props":77,"children":79},{"class":78},"ct-711500",[80],{"type":35,"value":81},"php",{"type":26,"tag":71,"props":83,"children":85},{"class":84},"ct-183901",[86],{"type":35,"value":87}," ",{"type":26,"tag":71,"props":89,"children":91},{"class":90},"ct-035036",[92],{"type":35,"value":93},"artisan",{"type":26,"tag":71,"props":95,"children":96},{"class":84},[97],{"type":35,"value":87},{"type":26,"tag":71,"props":99,"children":100},{"class":90},[101],{"type":35,"value":102},"make:middleware",{"type":26,"tag":71,"props":104,"children":105},{"class":84},[106],{"type":35,"value":87},{"type":26,"tag":71,"props":108,"children":109},{"class":90},[110],{"type":35,"value":111},"UserMiddleware",{"type":26,"tag":27,"props":113,"children":114},{},[115,117,122,124],{"type":35,"value":116},"For the sake of simplicity in this example we are going to check if the ",{"type":26,"tag":46,"props":118,"children":119},{},[120],{"type":35,"value":121},"user",{"type":35,"value":123}," has a specific name,\nif not it will redirect back with a status ",{"type":26,"tag":46,"props":125,"children":126},{},[127],{"type":35,"value":128},"flash message",{"type":26,"tag":27,"props":130,"children":131},{},[132,134],{"type":35,"value":133},"In directory ",{"type":26,"tag":46,"props":135,"children":136},{},[137],{"type":35,"value":138},"App/Http/Middleware",{"type":26,"tag":61,"props":140,"children":143},{"className":141,"code":142,"language":81,"meta":7},"language-php dracula","public function handle($request, Closure $next)\n{\n    // 1 way to get the model from route model binding\n    //$condition = Route::current()->parameters()->name === 'John Doe';\n\n    // 2 way to get the model from route model binding\n    //$condition = $request->name === 'John Doe'\n\n    // 3 way to get the model from route model binding\n    $condition = $request->route('user')->name === 'John Doe';\n\n    if ($condition) \n    {\n         return redirect()\n             ->back()\n             ->with('status', 'user is not the admin');\n    }\n    return $next($request);\n}\n",[144],{"type":26,"tag":46,"props":145,"children":146},{"__ignoreMap":7},[147,190,199,214,227,234,247,260,266,279,368,375,393,402,430,452,509,518,535],{"type":26,"tag":71,"props":148,"children":149},{"class":73,"line":74},[150,156,160,165,169,174,179,185],{"type":26,"tag":71,"props":151,"children":153},{"class":152},"ct-166232",[154],{"type":35,"value":155},"public",{"type":26,"tag":71,"props":157,"children":158},{"class":84},[159],{"type":35,"value":87},{"type":26,"tag":71,"props":161,"children":162},{"class":152},[163],{"type":35,"value":164},"function",{"type":26,"tag":71,"props":166,"children":167},{"class":84},[168],{"type":35,"value":87},{"type":26,"tag":71,"props":170,"children":171},{"class":78},[172],{"type":35,"value":173},"handle",{"type":26,"tag":71,"props":175,"children":176},{"class":84},[177],{"type":35,"value":178},"($request, ",{"type":26,"tag":71,"props":180,"children":182},{"class":181},"ct-432594",[183],{"type":35,"value":184},"Closure",{"type":26,"tag":71,"props":186,"children":187},{"class":84},[188],{"type":35,"value":189}," $next)\n",{"type":26,"tag":71,"props":191,"children":193},{"class":73,"line":192},2,[194],{"type":26,"tag":71,"props":195,"children":196},{"class":84},[197],{"type":35,"value":198},"{\n",{"type":26,"tag":71,"props":200,"children":202},{"class":73,"line":201},3,[203,208],{"type":26,"tag":71,"props":204,"children":205},{"class":84},[206],{"type":35,"value":207},"    ",{"type":26,"tag":71,"props":209,"children":211},{"class":210},"ct-784317",[212],{"type":35,"value":213},"// 1 way to get the model from route model binding\n",{"type":26,"tag":71,"props":215,"children":217},{"class":73,"line":216},4,[218,222],{"type":26,"tag":71,"props":219,"children":220},{"class":84},[221],{"type":35,"value":207},{"type":26,"tag":71,"props":223,"children":224},{"class":210},[225],{"type":35,"value":226},"//$condition = Route::current()->parameters()->name === 'John Doe';\n",{"type":26,"tag":71,"props":228,"children":230},{"class":73,"line":229},5,[231],{"type":26,"tag":71,"props":232,"children":233},{},[],{"type":26,"tag":71,"props":235,"children":237},{"class":73,"line":236},6,[238,242],{"type":26,"tag":71,"props":239,"children":240},{"class":84},[241],{"type":35,"value":207},{"type":26,"tag":71,"props":243,"children":244},{"class":210},[245],{"type":35,"value":246},"// 2 way to get the model from route model binding\n",{"type":26,"tag":71,"props":248,"children":250},{"class":73,"line":249},7,[251,255],{"type":26,"tag":71,"props":252,"children":253},{"class":84},[254],{"type":35,"value":207},{"type":26,"tag":71,"props":256,"children":257},{"class":210},[258],{"type":35,"value":259},"//$condition = $request->name === 'John Doe'\n",{"type":26,"tag":71,"props":261,"children":262},{"class":73,"line":10},[263],{"type":26,"tag":71,"props":264,"children":265},{},[],{"type":26,"tag":71,"props":267,"children":269},{"class":73,"line":268},9,[270,274],{"type":26,"tag":71,"props":271,"children":272},{"class":84},[273],{"type":35,"value":207},{"type":26,"tag":71,"props":275,"children":276},{"class":210},[277],{"type":35,"value":278},"// 3 way to get the model from route model binding\n",{"type":26,"tag":71,"props":280,"children":282},{"class":73,"line":281},10,[283,288,293,298,303,308,313,319,323,327,332,336,341,346,350,354,359,363],{"type":26,"tag":71,"props":284,"children":285},{"class":84},[286],{"type":35,"value":287},"    $condition ",{"type":26,"tag":71,"props":289,"children":290},{"class":152},[291],{"type":35,"value":292},"=",{"type":26,"tag":71,"props":294,"children":295},{"class":84},[296],{"type":35,"value":297}," $request",{"type":26,"tag":71,"props":299,"children":300},{"class":152},[301],{"type":35,"value":302},"->",{"type":26,"tag":71,"props":304,"children":305},{"class":78},[306],{"type":35,"value":307},"route",{"type":26,"tag":71,"props":309,"children":310},{"class":84},[311],{"type":35,"value":312},"(",{"type":26,"tag":71,"props":314,"children":316},{"class":315},"ct-882767",[317],{"type":35,"value":318},"'",{"type":26,"tag":71,"props":320,"children":321},{"class":90},[322],{"type":35,"value":121},{"type":26,"tag":71,"props":324,"children":325},{"class":315},[326],{"type":35,"value":318},{"type":26,"tag":71,"props":328,"children":329},{"class":84},[330],{"type":35,"value":331},")",{"type":26,"tag":71,"props":333,"children":334},{"class":152},[335],{"type":35,"value":302},{"type":26,"tag":71,"props":337,"children":338},{"class":84},[339],{"type":35,"value":340},"name ",{"type":26,"tag":71,"props":342,"children":343},{"class":152},[344],{"type":35,"value":345},"===",{"type":26,"tag":71,"props":347,"children":348},{"class":84},[349],{"type":35,"value":87},{"type":26,"tag":71,"props":351,"children":352},{"class":315},[353],{"type":35,"value":318},{"type":26,"tag":71,"props":355,"children":356},{"class":90},[357],{"type":35,"value":358},"John Doe",{"type":26,"tag":71,"props":360,"children":361},{"class":315},[362],{"type":35,"value":318},{"type":26,"tag":71,"props":364,"children":365},{"class":84},[366],{"type":35,"value":367},";\n",{"type":26,"tag":71,"props":369,"children":371},{"class":73,"line":370},11,[372],{"type":26,"tag":71,"props":373,"children":374},{},[],{"type":26,"tag":71,"props":376,"children":378},{"class":73,"line":377},12,[379,383,388],{"type":26,"tag":71,"props":380,"children":381},{"class":84},[382],{"type":35,"value":207},{"type":26,"tag":71,"props":384,"children":385},{"class":152},[386],{"type":35,"value":387},"if",{"type":26,"tag":71,"props":389,"children":390},{"class":84},[391],{"type":35,"value":392}," ($condition) \n",{"type":26,"tag":71,"props":394,"children":396},{"class":73,"line":395},13,[397],{"type":26,"tag":71,"props":398,"children":399},{"class":84},[400],{"type":35,"value":401},"    {\n",{"type":26,"tag":71,"props":403,"children":405},{"class":73,"line":404},14,[406,411,416,420,425],{"type":26,"tag":71,"props":407,"children":408},{"class":84},[409],{"type":35,"value":410},"         ",{"type":26,"tag":71,"props":412,"children":413},{"class":152},[414],{"type":35,"value":415},"return",{"type":26,"tag":71,"props":417,"children":418},{"class":84},[419],{"type":35,"value":87},{"type":26,"tag":71,"props":421,"children":422},{"class":78},[423],{"type":35,"value":424},"redirect",{"type":26,"tag":71,"props":426,"children":427},{"class":84},[428],{"type":35,"value":429},"()\n",{"type":26,"tag":71,"props":431,"children":433},{"class":73,"line":432},15,[434,439,443,448],{"type":26,"tag":71,"props":435,"children":436},{"class":84},[437],{"type":35,"value":438},"             ",{"type":26,"tag":71,"props":440,"children":441},{"class":152},[442],{"type":35,"value":302},{"type":26,"tag":71,"props":444,"children":445},{"class":78},[446],{"type":35,"value":447},"back",{"type":26,"tag":71,"props":449,"children":450},{"class":84},[451],{"type":35,"value":429},{"type":26,"tag":71,"props":453,"children":455},{"class":73,"line":454},16,[456,460,464,469,473,477,482,486,491,495,500,504],{"type":26,"tag":71,"props":457,"children":458},{"class":84},[459],{"type":35,"value":438},{"type":26,"tag":71,"props":461,"children":462},{"class":152},[463],{"type":35,"value":302},{"type":26,"tag":71,"props":465,"children":466},{"class":78},[467],{"type":35,"value":468},"with",{"type":26,"tag":71,"props":470,"children":471},{"class":84},[472],{"type":35,"value":312},{"type":26,"tag":71,"props":474,"children":475},{"class":315},[476],{"type":35,"value":318},{"type":26,"tag":71,"props":478,"children":479},{"class":90},[480],{"type":35,"value":481},"status",{"type":26,"tag":71,"props":483,"children":484},{"class":315},[485],{"type":35,"value":318},{"type":26,"tag":71,"props":487,"children":488},{"class":84},[489],{"type":35,"value":490},", ",{"type":26,"tag":71,"props":492,"children":493},{"class":315},[494],{"type":35,"value":318},{"type":26,"tag":71,"props":496,"children":497},{"class":90},[498],{"type":35,"value":499},"user is not the admin",{"type":26,"tag":71,"props":501,"children":502},{"class":315},[503],{"type":35,"value":318},{"type":26,"tag":71,"props":505,"children":506},{"class":84},[507],{"type":35,"value":508},");\n",{"type":26,"tag":71,"props":510,"children":512},{"class":73,"line":511},17,[513],{"type":26,"tag":71,"props":514,"children":515},{"class":84},[516],{"type":35,"value":517},"    }\n",{"type":26,"tag":71,"props":519,"children":521},{"class":73,"line":520},18,[522,526,530],{"type":26,"tag":71,"props":523,"children":524},{"class":84},[525],{"type":35,"value":207},{"type":26,"tag":71,"props":527,"children":528},{"class":152},[529],{"type":35,"value":415},{"type":26,"tag":71,"props":531,"children":532},{"class":84},[533],{"type":35,"value":534}," $next($request);\n",{"type":26,"tag":71,"props":536,"children":538},{"class":73,"line":537},19,[539],{"type":26,"tag":71,"props":540,"children":541},{"class":84},[542],{"type":35,"value":543},"}",{"type":26,"tag":545,"props":546,"children":547},"hr",{"id":7},[],{"type":26,"tag":27,"props":549,"children":550},{},[551,556,558,563],{"type":26,"tag":46,"props":552,"children":553},{},[554],{"type":35,"value":555},"Route model binding",{"type":35,"value":557}," only works if route has the model param ",{"type":26,"tag":46,"props":559,"children":560},{},[561],{"type":35,"value":562},"/{user}",{"type":35,"value":564}," and both names matches",{"type":26,"tag":545,"props":566,"children":568},{"id":567},"_1",[],{"type":26,"tag":27,"props":570,"children":571},{},[572,574,578,580,585,587,592],{"type":35,"value":573},"In order to use a custom param name ",{"type":26,"tag":46,"props":575,"children":576},{},[577],{"type":35,"value":15},{"type":35,"value":579}," provides different ways\nto customize ",{"type":26,"tag":46,"props":581,"children":582},{},[583],{"type":35,"value":584},"route model binding",{"type":35,"value":586}," the easiest way is to add the method ",{"type":26,"tag":46,"props":588,"children":589},{},[590],{"type":35,"value":591},"params(['user' => 'customParam'])",{"type":35,"value":593}," to the current route",{"type":26,"tag":27,"props":595,"children":596},{},[597],{"type":35,"value":598},"Thanks for reading!",{"type":26,"tag":600,"props":601,"children":602},"style",{},[603],{"type":35,"value":604},".dracula{color:#F8F8F2;background:#282A36;}.ct-711500{color:#50FA7B;}.ct-183901{color:#F8F8F2;}.ct-035036{color:#F1FA8C;}.ct-166232{color:#FF79C6;}.ct-432594{color:#8BE9FD;font-style:italic;}.ct-784317{color:#6272A4;}.ct-882767{color:#E9F284;}",{"title":7,"searchDepth":192,"depth":192,"links":606},[607],{"id":56,"depth":192,"text":59},"markdown","content:blog:8-use-laravel-route-model-binding-into-middlewares.md","content","blog/8-use-laravel-route-model-binding-into-middlewares.md","md",1696973721585]