[{"data":1,"prerenderedAt":714},["Reactive",2],{"post-19-run-tests-automatically-before-pushing-code-in-laravel":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"id":10,"published":11,"date":12,"tags":13,"announcement_banner":16,"announcement_link":16,"readingTime":17,"body":22,"_type":709,"_id":710,"_source":711,"_file":712,"_extension":713},"/blog/19-run-tests-automatically-before-pushing-code-in-laravel","blog",false,"","Run Tests Automatically Before Pushing Code In Laravel","Do not push code with failing tests, set Husky to execute test before pushing your code",19,true,"June 3rd, 2021",[14,15],"Laravel","DevOps",null,{"text":18,"minutes":19,"time":20,"words":21},"1 min read",0.84,50400,168,{"type":23,"children":24,"toc":701},"root",[25,34,60,113,119,131,262,268,288,294,313,324,481,493,518,536,690,695],{"type":26,"tag":27,"props":28,"children":30},"element","h2",{"id":29},"install-husky",[31],{"type":32,"value":33},"text","Install Husky",{"type":26,"tag":35,"props":36,"children":37},"p",{},[38,44,46,51,53,58],{"type":26,"tag":39,"props":40,"children":41},"code",{},[42],{"type":32,"value":43},"Husky",{"type":32,"value":45}," is an excellent tool to automate ",{"type":26,"tag":39,"props":47,"children":48},{},[49],{"type":32,"value":50},"hooks",{"type":32,"value":52},", in this post we are running ",{"type":26,"tag":39,"props":54,"children":55},{},[56],{"type":32,"value":57},"phpunit",{"type":32,"value":59}," tests before pushing code",{"type":26,"tag":61,"props":62,"children":66},"pre",{"className":63,"code":64,"language":65,"meta":7},"language-shell dracula","npm install husky@4 --save-dev\n","shell",[67],{"type":26,"tag":39,"props":68,"children":69},{"__ignoreMap":7},[70],{"type":26,"tag":71,"props":72,"children":75},"span",{"class":73,"line":74},"line",1,[76,82,88,94,98,103,107],{"type":26,"tag":71,"props":77,"children":79},{"class":78},"ct-711500",[80],{"type":32,"value":81},"npm",{"type":26,"tag":71,"props":83,"children":85},{"class":84},"ct-183901",[86],{"type":32,"value":87}," ",{"type":26,"tag":71,"props":89,"children":91},{"class":90},"ct-035036",[92],{"type":32,"value":93},"install",{"type":26,"tag":71,"props":95,"children":96},{"class":84},[97],{"type":32,"value":87},{"type":26,"tag":71,"props":99,"children":100},{"class":90},[101],{"type":32,"value":102},"husky@4",{"type":26,"tag":71,"props":104,"children":105},{"class":84},[106],{"type":32,"value":87},{"type":26,"tag":71,"props":108,"children":110},{"class":109},"ct-531774",[111],{"type":32,"value":112},"--save-dev",{"type":26,"tag":27,"props":114,"children":116},{"id":115},"run-all-laravel-tests-after-pushing-code",[117],{"type":32,"value":118},"Run all laravel tests after pushing code:",{"type":26,"tag":35,"props":120,"children":121},{},[122,124,129],{"type":32,"value":123},"On ",{"type":26,"tag":39,"props":125,"children":126},{},[127],{"type":32,"value":128},"package.json",{"type":32,"value":130}," file add this code",{"type":26,"tag":61,"props":132,"children":136},{"className":133,"code":134,"language":135,"meta":7},"language-javascript dracula","    \"husky\": {\n        \"hooks\": {\n            \"pre-push\": \"php artisan test\"\n        }\n    },\n","javascript",[137],{"type":26,"tag":39,"props":138,"children":139},{"__ignoreMap":7},[140,168,200,244,253],{"type":26,"tag":71,"props":141,"children":142},{"class":73,"line":74},[143,148,154,159,163],{"type":26,"tag":71,"props":144,"children":145},{"class":84},[146],{"type":32,"value":147},"    ",{"type":26,"tag":71,"props":149,"children":151},{"class":150},"ct-882767",[152],{"type":32,"value":153},"\"",{"type":26,"tag":71,"props":155,"children":156},{"class":90},[157],{"type":32,"value":158},"husky",{"type":26,"tag":71,"props":160,"children":161},{"class":150},[162],{"type":32,"value":153},{"type":26,"tag":71,"props":164,"children":165},{"class":84},[166],{"type":32,"value":167},": {\n",{"type":26,"tag":71,"props":169,"children":171},{"class":73,"line":170},2,[172,177,181,185,189,195],{"type":26,"tag":71,"props":173,"children":174},{"class":84},[175],{"type":32,"value":176},"        ",{"type":26,"tag":71,"props":178,"children":179},{"class":150},[180],{"type":32,"value":153},{"type":26,"tag":71,"props":182,"children":183},{"class":90},[184],{"type":32,"value":50},{"type":26,"tag":71,"props":186,"children":187},{"class":150},[188],{"type":32,"value":153},{"type":26,"tag":71,"props":190,"children":192},{"class":191},"ct-166232",[193],{"type":32,"value":194},":",{"type":26,"tag":71,"props":196,"children":197},{"class":84},[198],{"type":32,"value":199}," {\n",{"type":26,"tag":71,"props":201,"children":203},{"class":73,"line":202},3,[204,209,213,218,222,226,230,234,239],{"type":26,"tag":71,"props":205,"children":206},{"class":84},[207],{"type":32,"value":208},"            ",{"type":26,"tag":71,"props":210,"children":211},{"class":150},[212],{"type":32,"value":153},{"type":26,"tag":71,"props":214,"children":215},{"class":90},[216],{"type":32,"value":217},"pre-push",{"type":26,"tag":71,"props":219,"children":220},{"class":150},[221],{"type":32,"value":153},{"type":26,"tag":71,"props":223,"children":224},{"class":191},[225],{"type":32,"value":194},{"type":26,"tag":71,"props":227,"children":228},{"class":84},[229],{"type":32,"value":87},{"type":26,"tag":71,"props":231,"children":232},{"class":150},[233],{"type":32,"value":153},{"type":26,"tag":71,"props":235,"children":236},{"class":90},[237],{"type":32,"value":238},"php artisan test",{"type":26,"tag":71,"props":240,"children":241},{"class":150},[242],{"type":32,"value":243},"\"\n",{"type":26,"tag":71,"props":245,"children":247},{"class":73,"line":246},4,[248],{"type":26,"tag":71,"props":249,"children":250},{"class":84},[251],{"type":32,"value":252},"        }\n",{"type":26,"tag":71,"props":254,"children":256},{"class":73,"line":255},5,[257],{"type":26,"tag":71,"props":258,"children":259},{"class":84},[260],{"type":32,"value":261},"    },",{"type":26,"tag":27,"props":263,"children":265},{"id":264},"go-further",[266],{"type":32,"value":267},"Go further",{"type":26,"tag":35,"props":269,"children":270},{},[271,275,277,281,283],{"type":26,"tag":39,"props":272,"children":273},{},[274],{"type":32,"value":43},{"type":32,"value":276}," also allows to add ",{"type":26,"tag":39,"props":278,"children":279},{},[280],{"type":32,"value":50},{"type":32,"value":282}," before adding a ",{"type":26,"tag":39,"props":284,"children":285},{},[286],{"type":32,"value":287},"commit",{"type":26,"tag":27,"props":289,"children":291},{"id":290},"add-pre-commit-hooks",[292],{"type":32,"value":293},"Add pre commit hooks",{"type":26,"tag":35,"props":295,"children":296},{},[297,299,304,306,311],{"type":32,"value":298},"If you want to learn how to install and configure ",{"type":26,"tag":39,"props":300,"children":301},{},[302],{"type":32,"value":303},"PHPInsights",{"type":32,"value":305}," or\nany other package for ",{"type":26,"tag":39,"props":307,"children":308},{},[309],{"type":32,"value":310},"static analyze",{"type":32,"value":312}," the links are at the end of the post",{"type":26,"tag":35,"props":314,"children":315},{},[316,318,322],{"type":32,"value":317},"You can run any package or custom command, in this case I will add a artisan command from ",{"type":26,"tag":39,"props":319,"children":320},{},[321],{"type":32,"value":303},{"type":32,"value":323},".",{"type":26,"tag":61,"props":325,"children":327},{"className":133,"code":326,"language":135,"meta":7},"    \"husky\": {\n        \"hooks\": {\n            \"pre-commit\": \"php artisan insights -v\",\n            \"pre-push\": \"php artisan test\"\n        }\n    },\n",[328],{"type":26,"tag":39,"props":329,"children":330},{"__ignoreMap":7},[331,354,381,427,466,473],{"type":26,"tag":71,"props":332,"children":333},{"class":73,"line":74},[334,338,342,346,350],{"type":26,"tag":71,"props":335,"children":336},{"class":84},[337],{"type":32,"value":147},{"type":26,"tag":71,"props":339,"children":340},{"class":150},[341],{"type":32,"value":153},{"type":26,"tag":71,"props":343,"children":344},{"class":90},[345],{"type":32,"value":158},{"type":26,"tag":71,"props":347,"children":348},{"class":150},[349],{"type":32,"value":153},{"type":26,"tag":71,"props":351,"children":352},{"class":84},[353],{"type":32,"value":167},{"type":26,"tag":71,"props":355,"children":356},{"class":73,"line":170},[357,361,365,369,373,377],{"type":26,"tag":71,"props":358,"children":359},{"class":84},[360],{"type":32,"value":176},{"type":26,"tag":71,"props":362,"children":363},{"class":150},[364],{"type":32,"value":153},{"type":26,"tag":71,"props":366,"children":367},{"class":90},[368],{"type":32,"value":50},{"type":26,"tag":71,"props":370,"children":371},{"class":150},[372],{"type":32,"value":153},{"type":26,"tag":71,"props":374,"children":375},{"class":191},[376],{"type":32,"value":194},{"type":26,"tag":71,"props":378,"children":379},{"class":84},[380],{"type":32,"value":199},{"type":26,"tag":71,"props":382,"children":383},{"class":73,"line":202},[384,388,392,397,401,405,409,413,418,422],{"type":26,"tag":71,"props":385,"children":386},{"class":84},[387],{"type":32,"value":208},{"type":26,"tag":71,"props":389,"children":390},{"class":150},[391],{"type":32,"value":153},{"type":26,"tag":71,"props":393,"children":394},{"class":90},[395],{"type":32,"value":396},"pre-commit",{"type":26,"tag":71,"props":398,"children":399},{"class":150},[400],{"type":32,"value":153},{"type":26,"tag":71,"props":402,"children":403},{"class":191},[404],{"type":32,"value":194},{"type":26,"tag":71,"props":406,"children":407},{"class":84},[408],{"type":32,"value":87},{"type":26,"tag":71,"props":410,"children":411},{"class":150},[412],{"type":32,"value":153},{"type":26,"tag":71,"props":414,"children":415},{"class":90},[416],{"type":32,"value":417},"php artisan insights -v",{"type":26,"tag":71,"props":419,"children":420},{"class":150},[421],{"type":32,"value":153},{"type":26,"tag":71,"props":423,"children":424},{"class":84},[425],{"type":32,"value":426},",\n",{"type":26,"tag":71,"props":428,"children":429},{"class":73,"line":246},[430,434,438,442,446,450,454,458,462],{"type":26,"tag":71,"props":431,"children":432},{"class":84},[433],{"type":32,"value":208},{"type":26,"tag":71,"props":435,"children":436},{"class":150},[437],{"type":32,"value":153},{"type":26,"tag":71,"props":439,"children":440},{"class":90},[441],{"type":32,"value":217},{"type":26,"tag":71,"props":443,"children":444},{"class":150},[445],{"type":32,"value":153},{"type":26,"tag":71,"props":447,"children":448},{"class":191},[449],{"type":32,"value":194},{"type":26,"tag":71,"props":451,"children":452},{"class":84},[453],{"type":32,"value":87},{"type":26,"tag":71,"props":455,"children":456},{"class":150},[457],{"type":32,"value":153},{"type":26,"tag":71,"props":459,"children":460},{"class":90},[461],{"type":32,"value":238},{"type":26,"tag":71,"props":463,"children":464},{"class":150},[465],{"type":32,"value":243},{"type":26,"tag":71,"props":467,"children":468},{"class":73,"line":255},[469],{"type":26,"tag":71,"props":470,"children":471},{"class":84},[472],{"type":32,"value":252},{"type":26,"tag":71,"props":474,"children":476},{"class":73,"line":475},6,[477],{"type":26,"tag":71,"props":478,"children":479},{"class":84},[480],{"type":32,"value":261},{"type":26,"tag":27,"props":482,"children":484},{"id":483},"adding-more-than-one-pre-commit-hook",[485,487,491],{"type":32,"value":486},"Adding more than one ",{"type":26,"tag":39,"props":488,"children":489},{},[490],{"type":32,"value":396},{"type":32,"value":492}," hook",{"type":26,"tag":35,"props":494,"children":495},{},[496,498,502,504,509,511,516],{"type":32,"value":497},"You can configure ",{"type":26,"tag":39,"props":499,"children":500},{},[501],{"type":32,"value":43},{"type":32,"value":503}," to add more than one command on any ",{"type":26,"tag":39,"props":505,"children":506},{},[507],{"type":32,"value":508},"hook",{"type":32,"value":510}," by adding ",{"type":26,"tag":39,"props":512,"children":513},{},[514],{"type":32,"value":515},"&&",{"type":32,"value":517}," between every command",{"type":26,"tag":35,"props":519,"children":520},{},[521,523,527,529,534],{"type":32,"value":522},"In this case it would be configured to run ",{"type":26,"tag":39,"props":524,"children":525},{},[526],{"type":32,"value":303},{"type":32,"value":528}," and ",{"type":26,"tag":39,"props":530,"children":531},{},[532],{"type":32,"value":533},"PHPCSFixer",{"type":32,"value":535},", but you can run any package or custom command",{"type":26,"tag":61,"props":537,"children":539},{"className":133,"code":538,"language":135,"meta":7},"    \"husky\": {\n        \"hooks\": {\n            \"pre-commit\": \"php artisan insights -v && vendor/bin/php-cs-fixer fix\",\n            \"pre-push\": \"php artisan test\"\n        }\n    },\n",[540],{"type":26,"tag":39,"props":541,"children":542},{"__ignoreMap":7},[543,566,593,637,676,683],{"type":26,"tag":71,"props":544,"children":545},{"class":73,"line":74},[546,550,554,558,562],{"type":26,"tag":71,"props":547,"children":548},{"class":84},[549],{"type":32,"value":147},{"type":26,"tag":71,"props":551,"children":552},{"class":150},[553],{"type":32,"value":153},{"type":26,"tag":71,"props":555,"children":556},{"class":90},[557],{"type":32,"value":158},{"type":26,"tag":71,"props":559,"children":560},{"class":150},[561],{"type":32,"value":153},{"type":26,"tag":71,"props":563,"children":564},{"class":84},[565],{"type":32,"value":167},{"type":26,"tag":71,"props":567,"children":568},{"class":73,"line":170},[569,573,577,581,585,589],{"type":26,"tag":71,"props":570,"children":571},{"class":84},[572],{"type":32,"value":176},{"type":26,"tag":71,"props":574,"children":575},{"class":150},[576],{"type":32,"value":153},{"type":26,"tag":71,"props":578,"children":579},{"class":90},[580],{"type":32,"value":50},{"type":26,"tag":71,"props":582,"children":583},{"class":150},[584],{"type":32,"value":153},{"type":26,"tag":71,"props":586,"children":587},{"class":191},[588],{"type":32,"value":194},{"type":26,"tag":71,"props":590,"children":591},{"class":84},[592],{"type":32,"value":199},{"type":26,"tag":71,"props":594,"children":595},{"class":73,"line":202},[596,600,604,608,612,616,620,624,629,633],{"type":26,"tag":71,"props":597,"children":598},{"class":84},[599],{"type":32,"value":208},{"type":26,"tag":71,"props":601,"children":602},{"class":150},[603],{"type":32,"value":153},{"type":26,"tag":71,"props":605,"children":606},{"class":90},[607],{"type":32,"value":396},{"type":26,"tag":71,"props":609,"children":610},{"class":150},[611],{"type":32,"value":153},{"type":26,"tag":71,"props":613,"children":614},{"class":191},[615],{"type":32,"value":194},{"type":26,"tag":71,"props":617,"children":618},{"class":84},[619],{"type":32,"value":87},{"type":26,"tag":71,"props":621,"children":622},{"class":150},[623],{"type":32,"value":153},{"type":26,"tag":71,"props":625,"children":626},{"class":90},[627],{"type":32,"value":628},"php artisan insights -v && vendor/bin/php-cs-fixer fix",{"type":26,"tag":71,"props":630,"children":631},{"class":150},[632],{"type":32,"value":153},{"type":26,"tag":71,"props":634,"children":635},{"class":84},[636],{"type":32,"value":426},{"type":26,"tag":71,"props":638,"children":639},{"class":73,"line":246},[640,644,648,652,656,660,664,668,672],{"type":26,"tag":71,"props":641,"children":642},{"class":84},[643],{"type":32,"value":208},{"type":26,"tag":71,"props":645,"children":646},{"class":150},[647],{"type":32,"value":153},{"type":26,"tag":71,"props":649,"children":650},{"class":90},[651],{"type":32,"value":217},{"type":26,"tag":71,"props":653,"children":654},{"class":150},[655],{"type":32,"value":153},{"type":26,"tag":71,"props":657,"children":658},{"class":191},[659],{"type":32,"value":194},{"type":26,"tag":71,"props":661,"children":662},{"class":84},[663],{"type":32,"value":87},{"type":26,"tag":71,"props":665,"children":666},{"class":150},[667],{"type":32,"value":153},{"type":26,"tag":71,"props":669,"children":670},{"class":90},[671],{"type":32,"value":238},{"type":26,"tag":71,"props":673,"children":674},{"class":150},[675],{"type":32,"value":243},{"type":26,"tag":71,"props":677,"children":678},{"class":73,"line":255},[679],{"type":26,"tag":71,"props":680,"children":681},{"class":84},[682],{"type":32,"value":252},{"type":26,"tag":71,"props":684,"children":685},{"class":73,"line":475},[686],{"type":26,"tag":71,"props":687,"children":688},{"class":84},[689],{"type":32,"value":261},{"type":26,"tag":35,"props":691,"children":692},{},[693],{"type":32,"value":694},"Thanks for reading!",{"type":26,"tag":696,"props":697,"children":698},"style",{},[699],{"type":32,"value":700},".dracula{color:#F8F8F2;background:#282A36;}.ct-711500{color:#50FA7B;}.ct-183901{color:#F8F8F2;}.ct-035036{color:#F1FA8C;}.ct-531774{color:#BD93F9;}.ct-882767{color:#E9F284;}.ct-166232{color:#FF79C6;}",{"title":7,"searchDepth":170,"depth":170,"links":702},[703,704,705,706,707],{"id":29,"depth":170,"text":33},{"id":115,"depth":170,"text":118},{"id":264,"depth":170,"text":267},{"id":290,"depth":170,"text":293},{"id":483,"depth":170,"text":708},"Adding more than one pre-commit hook","markdown","content:blog:19-run-tests-automatically-before-pushing-code-in-laravel.md","content","blog/19-run-tests-automatically-before-pushing-code-in-laravel.md","md",1696974819902]