[{"data":1,"prerenderedAt":1537},["Reactive",2],{"post-10-show-api-exceptions-in-laravel":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"id":10,"published":11,"date":12,"cover_image":13,"tags":14,"announcement_banner":16,"announcement_link":16,"readingTime":17,"body":22,"_type":1532,"_id":1533,"_source":1534,"_file":1535,"_extension":1536},"/blog/10-show-api-exceptions-in-laravel","blog",false,"","Show API exceptions in Laravel.","Simple snippet to show exceptions on API development",10,true,"September 10th, 2020","https://dev-to-uploads.s3.amazonaws.com/i/h8y1tc32lprt41y3szsu.png",[15],"Laravel",null,{"text":18,"minutes":19,"time":20,"words":21},"2 min read",1.685,101100,337,{"type":23,"children":24,"toc":1525},"root",[25,34,48,69,81,87,99,210,216,234,261,288,331,360,632,643,649,660,1004,1014,1051,1061,1067,1272,1280,1332,1344,1514,1519],{"type":26,"tag":27,"props":28,"children":30},"element","h2",{"id":29},"check-request-headers",[31],{"type":32,"value":33},"text","Check Request Headers",{"type":26,"tag":35,"props":36,"children":37},"p",{},[38,40,46],{"type":32,"value":39},"If you are using ",{"type":26,"tag":41,"props":42,"children":43},"code",{},[44],{"type":32,"value":45},"Postman",{"type":32,"value":47}," (or similar) in order to make a request, you should add this headers",{"type":26,"tag":49,"props":50,"children":51},"ul",{},[52,61],{"type":26,"tag":53,"props":54,"children":55},"li",{},[56],{"type":26,"tag":41,"props":57,"children":58},{},[59],{"type":32,"value":60},"Accept: Application/Json",{"type":26,"tag":53,"props":62,"children":63},{},[64],{"type":26,"tag":41,"props":65,"children":66},{},[67],{"type":32,"value":68},"Content-Type: Application/Json",{"type":26,"tag":35,"props":70,"children":71},{},[72,74,79],{"type":32,"value":73},"Then you should be able to see ",{"type":26,"tag":41,"props":75,"children":76},{},[77],{"type":32,"value":78},"JSON",{"type":32,"value":80}," response with the current exception",{"type":26,"tag":27,"props":82,"children":84},{"id":83},"showing-exceptions-while-running-tests",[85],{"type":32,"value":86},"Showing Exceptions while running tests",{"type":26,"tag":35,"props":88,"children":89},{},[90,92,97],{"type":32,"value":91},"Check that tests are using the proper ",{"type":26,"tag":41,"props":93,"children":94},{},[95],{"type":32,"value":96},"json",{"type":32,"value":98}," methods",{"type":26,"tag":100,"props":101,"children":105},"pre",{"className":102,"code":103,"language":104,"meta":7},"language-php dracula","// This method does not add headers to the request\n// $response = $this->post('api/users');\n\n// This method add headers to the request in order to get json exceptions\n$response = $this->postJson('api/users');\n","php",[106],{"type":26,"tag":41,"props":107,"children":108},{"__ignoreMap":7},[109,121,130,137,146],{"type":26,"tag":110,"props":111,"children":114},"span",{"class":112,"line":113},"line",1,[115],{"type":26,"tag":110,"props":116,"children":118},{"class":117},"ct-784317",[119],{"type":32,"value":120},"// This method does not add headers to the request\n",{"type":26,"tag":110,"props":122,"children":124},{"class":112,"line":123},2,[125],{"type":26,"tag":110,"props":126,"children":127},{"class":117},[128],{"type":32,"value":129},"// $response = $this->post('api/users');\n",{"type":26,"tag":110,"props":131,"children":133},{"class":112,"line":132},3,[134],{"type":26,"tag":110,"props":135,"children":136},{},[],{"type":26,"tag":110,"props":138,"children":140},{"class":112,"line":139},4,[141],{"type":26,"tag":110,"props":142,"children":143},{"class":117},[144],{"type":32,"value":145},"// This method add headers to the request in order to get json exceptions\n",{"type":26,"tag":110,"props":147,"children":149},{"class":112,"line":148},5,[150,156,162,167,173,178,184,189,195,201,205],{"type":26,"tag":110,"props":151,"children":153},{"class":152},"ct-183901",[154],{"type":32,"value":155},"$response ",{"type":26,"tag":110,"props":157,"children":159},{"class":158},"ct-166232",[160],{"type":32,"value":161},"=",{"type":26,"tag":110,"props":163,"children":164},{"class":152},[165],{"type":32,"value":166}," ",{"type":26,"tag":110,"props":168,"children":170},{"class":169},"ct-531775",[171],{"type":32,"value":172},"$this",{"type":26,"tag":110,"props":174,"children":175},{"class":158},[176],{"type":32,"value":177},"->",{"type":26,"tag":110,"props":179,"children":181},{"class":180},"ct-711500",[182],{"type":32,"value":183},"postJson",{"type":26,"tag":110,"props":185,"children":186},{"class":152},[187],{"type":32,"value":188},"(",{"type":26,"tag":110,"props":190,"children":192},{"class":191},"ct-882767",[193],{"type":32,"value":194},"'",{"type":26,"tag":110,"props":196,"children":198},{"class":197},"ct-035036",[199],{"type":32,"value":200},"api/users",{"type":26,"tag":110,"props":202,"children":203},{"class":191},[204],{"type":32,"value":194},{"type":26,"tag":110,"props":206,"children":207},{"class":152},[208],{"type":32,"value":209},");",{"type":26,"tag":27,"props":211,"children":213},{"id":212},"cleaning-exceptions-messages",[214],{"type":32,"value":215},"Cleaning Exceptions Messages",{"type":26,"tag":35,"props":217,"children":218},{},[219,221,225,227,232],{"type":32,"value":220},"If you are working with ",{"type":26,"tag":41,"props":222,"children":223},{},[224],{"type":32,"value":15},{"type":32,"value":226}," on an ",{"type":26,"tag":41,"props":228,"children":229},{},[230],{"type":32,"value":231},"API",{"type":32,"value":233}," there are helpers like",{"type":26,"tag":49,"props":235,"children":236},{},[237,245,253],{"type":26,"tag":53,"props":238,"children":239},{},[240],{"type":26,"tag":41,"props":241,"children":242},{},[243],{"type":32,"value":244},"abort",{"type":26,"tag":53,"props":246,"children":247},{},[248],{"type":26,"tag":41,"props":249,"children":250},{},[251],{"type":32,"value":252},"abort_if",{"type":26,"tag":53,"props":254,"children":255},{},[256],{"type":26,"tag":41,"props":257,"children":258},{},[259],{"type":32,"value":260},"abort_unless",{"type":26,"tag":35,"props":262,"children":263},{},[264,266,271,273,279,281,286],{"type":32,"value":265},"In ",{"type":26,"tag":41,"props":267,"children":268},{},[269],{"type":32,"value":270},"development",{"type":32,"value":272},", it would show an entire ",{"type":26,"tag":274,"props":275,"children":276},"strong",{},[277],{"type":32,"value":278},"stack trace",{"type":32,"value":280},", and maybe you expect to get a preview of what exactly it throws,\nwell you can go to ",{"type":26,"tag":41,"props":282,"children":283},{},[284],{"type":32,"value":285},".env",{"type":32,"value":287}," file and change the value of",{"type":26,"tag":100,"props":289,"children":293},{"className":290,"code":291,"language":292,"meta":7},"language-bash dracula","## APP_ENV='local' instead of this\nAPP_ENV='production'\n","bash",[294],{"type":26,"tag":41,"props":295,"children":296},{"__ignoreMap":7},[297,305],{"type":26,"tag":110,"props":298,"children":299},{"class":112,"line":113},[300],{"type":26,"tag":110,"props":301,"children":302},{"class":117},[303],{"type":32,"value":304},"## APP_ENV='local' instead of this\n",{"type":26,"tag":110,"props":306,"children":307},{"class":112,"line":123},[308,314,318,322,327],{"type":26,"tag":110,"props":309,"children":311},{"class":310},"ct-531774",[312],{"type":32,"value":313},"APP_ENV",{"type":26,"tag":110,"props":315,"children":316},{"class":158},[317],{"type":32,"value":161},{"type":26,"tag":110,"props":319,"children":320},{"class":191},[321],{"type":32,"value":194},{"type":26,"tag":110,"props":323,"children":324},{"class":197},[325],{"type":32,"value":326},"production",{"type":26,"tag":110,"props":328,"children":329},{"class":191},[330],{"type":32,"value":194},{"type":26,"tag":35,"props":332,"children":333},{},[334,336,340,342,346,348,353,355],{"type":32,"value":335},"This is great for ",{"type":26,"tag":41,"props":337,"children":338},{},[339],{"type":32,"value":326},{"type":32,"value":341},", but on ",{"type":26,"tag":41,"props":343,"children":344},{},[345],{"type":32,"value":270},{"type":32,"value":347}," there are a lot of benefits to keep environment as ",{"type":26,"tag":41,"props":349,"children":350},{},[351],{"type":32,"value":352},"local",{"type":32,"value":354},",\nin order to keep the messages cleaner we can make a change in ",{"type":26,"tag":41,"props":356,"children":357},{},[358],{"type":32,"value":359},"app/exceptions/handler.php",{"type":26,"tag":100,"props":361,"children":363},{"className":102,"code":362,"language":104,"meta":7},"public function register() \n{\n    $this->renderable(function (Exception $exception, Request $request) {\n        if($request->expectsJson()) {\n            return response()->json([\n                'message' => $exception->getMessage()\n            ], $exception->getCode());\n        }\n    });\n}\n",[364],{"type":26,"tag":41,"props":365,"children":366},{"__ignoreMap":7},[367,398,406,461,493,533,583,606,615,624],{"type":26,"tag":110,"props":368,"children":369},{"class":112,"line":113},[370,375,379,384,388,393],{"type":26,"tag":110,"props":371,"children":372},{"class":158},[373],{"type":32,"value":374},"public",{"type":26,"tag":110,"props":376,"children":377},{"class":152},[378],{"type":32,"value":166},{"type":26,"tag":110,"props":380,"children":381},{"class":158},[382],{"type":32,"value":383},"function",{"type":26,"tag":110,"props":385,"children":386},{"class":152},[387],{"type":32,"value":166},{"type":26,"tag":110,"props":389,"children":390},{"class":180},[391],{"type":32,"value":392},"register",{"type":26,"tag":110,"props":394,"children":395},{"class":152},[396],{"type":32,"value":397},"() \n",{"type":26,"tag":110,"props":399,"children":400},{"class":112,"line":123},[401],{"type":26,"tag":110,"props":402,"children":403},{"class":152},[404],{"type":32,"value":405},"{\n",{"type":26,"tag":110,"props":407,"children":408},{"class":112,"line":132},[409,414,418,422,427,431,435,440,446,451,456],{"type":26,"tag":110,"props":410,"children":411},{"class":152},[412],{"type":32,"value":413},"    ",{"type":26,"tag":110,"props":415,"children":416},{"class":169},[417],{"type":32,"value":172},{"type":26,"tag":110,"props":419,"children":420},{"class":158},[421],{"type":32,"value":177},{"type":26,"tag":110,"props":423,"children":424},{"class":180},[425],{"type":32,"value":426},"renderable",{"type":26,"tag":110,"props":428,"children":429},{"class":152},[430],{"type":32,"value":188},{"type":26,"tag":110,"props":432,"children":433},{"class":158},[434],{"type":32,"value":383},{"type":26,"tag":110,"props":436,"children":437},{"class":152},[438],{"type":32,"value":439}," (",{"type":26,"tag":110,"props":441,"children":443},{"class":442},"ct-432594",[444],{"type":32,"value":445},"Exception",{"type":26,"tag":110,"props":447,"children":448},{"class":152},[449],{"type":32,"value":450}," $exception, ",{"type":26,"tag":110,"props":452,"children":453},{"class":442},[454],{"type":32,"value":455},"Request",{"type":26,"tag":110,"props":457,"children":458},{"class":152},[459],{"type":32,"value":460}," $request) {\n",{"type":26,"tag":110,"props":462,"children":463},{"class":112,"line":139},[464,469,474,479,483,488],{"type":26,"tag":110,"props":465,"children":466},{"class":152},[467],{"type":32,"value":468},"        ",{"type":26,"tag":110,"props":470,"children":471},{"class":158},[472],{"type":32,"value":473},"if",{"type":26,"tag":110,"props":475,"children":476},{"class":152},[477],{"type":32,"value":478},"($request",{"type":26,"tag":110,"props":480,"children":481},{"class":158},[482],{"type":32,"value":177},{"type":26,"tag":110,"props":484,"children":485},{"class":180},[486],{"type":32,"value":487},"expectsJson",{"type":26,"tag":110,"props":489,"children":490},{"class":152},[491],{"type":32,"value":492},"()) {\n",{"type":26,"tag":110,"props":494,"children":495},{"class":112,"line":148},[496,501,506,510,515,520,524,528],{"type":26,"tag":110,"props":497,"children":498},{"class":152},[499],{"type":32,"value":500},"            ",{"type":26,"tag":110,"props":502,"children":503},{"class":158},[504],{"type":32,"value":505},"return",{"type":26,"tag":110,"props":507,"children":508},{"class":152},[509],{"type":32,"value":166},{"type":26,"tag":110,"props":511,"children":512},{"class":180},[513],{"type":32,"value":514},"response",{"type":26,"tag":110,"props":516,"children":517},{"class":152},[518],{"type":32,"value":519},"()",{"type":26,"tag":110,"props":521,"children":522},{"class":158},[523],{"type":32,"value":177},{"type":26,"tag":110,"props":525,"children":526},{"class":180},[527],{"type":32,"value":96},{"type":26,"tag":110,"props":529,"children":530},{"class":152},[531],{"type":32,"value":532},"([\n",{"type":26,"tag":110,"props":534,"children":536},{"class":112,"line":535},6,[537,542,546,551,555,559,564,569,573,578],{"type":26,"tag":110,"props":538,"children":539},{"class":152},[540],{"type":32,"value":541},"                ",{"type":26,"tag":110,"props":543,"children":544},{"class":191},[545],{"type":32,"value":194},{"type":26,"tag":110,"props":547,"children":548},{"class":197},[549],{"type":32,"value":550},"message",{"type":26,"tag":110,"props":552,"children":553},{"class":191},[554],{"type":32,"value":194},{"type":26,"tag":110,"props":556,"children":557},{"class":152},[558],{"type":32,"value":166},{"type":26,"tag":110,"props":560,"children":561},{"class":158},[562],{"type":32,"value":563},"=>",{"type":26,"tag":110,"props":565,"children":566},{"class":152},[567],{"type":32,"value":568}," $exception",{"type":26,"tag":110,"props":570,"children":571},{"class":158},[572],{"type":32,"value":177},{"type":26,"tag":110,"props":574,"children":575},{"class":180},[576],{"type":32,"value":577},"getMessage",{"type":26,"tag":110,"props":579,"children":580},{"class":152},[581],{"type":32,"value":582},"()\n",{"type":26,"tag":110,"props":584,"children":586},{"class":112,"line":585},7,[587,592,596,601],{"type":26,"tag":110,"props":588,"children":589},{"class":152},[590],{"type":32,"value":591},"            ], $exception",{"type":26,"tag":110,"props":593,"children":594},{"class":158},[595],{"type":32,"value":177},{"type":26,"tag":110,"props":597,"children":598},{"class":180},[599],{"type":32,"value":600},"getCode",{"type":26,"tag":110,"props":602,"children":603},{"class":152},[604],{"type":32,"value":605},"());\n",{"type":26,"tag":110,"props":607,"children":609},{"class":112,"line":608},8,[610],{"type":26,"tag":110,"props":611,"children":612},{"class":152},[613],{"type":32,"value":614},"        }\n",{"type":26,"tag":110,"props":616,"children":618},{"class":112,"line":617},9,[619],{"type":26,"tag":110,"props":620,"children":621},{"class":152},[622],{"type":32,"value":623},"    });\n",{"type":26,"tag":110,"props":625,"children":626},{"class":112,"line":10},[627],{"type":26,"tag":110,"props":628,"children":629},{"class":152},[630],{"type":32,"value":631},"}",{"type":26,"tag":35,"props":633,"children":634},{},[635,637,641],{"type":32,"value":636},"Now, you are able to still on ",{"type":26,"tag":41,"props":638,"children":639},{},[640],{"type":32,"value":270},{"type":32,"value":642}," and get a cleaner response",{"type":26,"tag":27,"props":644,"children":646},{"id":645},"going-one-step-forward",[647],{"type":32,"value":648},"Going One-Step Forward",{"type":26,"tag":35,"props":650,"children":651},{},[652,654,658],{"type":32,"value":653},"You can create custom ",{"type":26,"tag":41,"props":655,"children":656},{},[657],{"type":32,"value":445},{"type":32,"value":659}," classes to represent in a better way some logic exception",{"type":26,"tag":100,"props":661,"children":663},{"className":102,"code":662,"language":104,"meta":7},"class CustomException extends Exception\n{\n    public static function internalException()\n    {\n        return new static('An internal Exception Ocurred!', 500);\n    }\n}\n\nclass TicketsException extends CustomException\n{\n    public static function noMoreTicketsAvailable()\n    {\n        return new static('No More Tickets Available', 404);\n    }\n}\n",[664],{"type":26,"tag":41,"props":665,"children":666},{"__ignoreMap":7},[667,703,710,751,759,819,827,835,841,874,881,922,930,988,996],{"type":26,"tag":110,"props":668,"children":669},{"class":112,"line":113},[670,675,679,685,689,694,698],{"type":26,"tag":110,"props":671,"children":672},{"class":158},[673],{"type":32,"value":674},"class",{"type":26,"tag":110,"props":676,"children":677},{"class":152},[678],{"type":32,"value":166},{"type":26,"tag":110,"props":680,"children":682},{"class":681},"ct-432593",[683],{"type":32,"value":684},"CustomException",{"type":26,"tag":110,"props":686,"children":687},{"class":152},[688],{"type":32,"value":166},{"type":26,"tag":110,"props":690,"children":691},{"class":158},[692],{"type":32,"value":693},"extends",{"type":26,"tag":110,"props":695,"children":696},{"class":152},[697],{"type":32,"value":166},{"type":26,"tag":110,"props":699,"children":700},{"class":442},[701],{"type":32,"value":702},"Exception\n",{"type":26,"tag":110,"props":704,"children":705},{"class":112,"line":123},[706],{"type":26,"tag":110,"props":707,"children":708},{"class":152},[709],{"type":32,"value":405},{"type":26,"tag":110,"props":711,"children":712},{"class":112,"line":132},[713,717,721,725,730,734,738,742,747],{"type":26,"tag":110,"props":714,"children":715},{"class":152},[716],{"type":32,"value":413},{"type":26,"tag":110,"props":718,"children":719},{"class":158},[720],{"type":32,"value":374},{"type":26,"tag":110,"props":722,"children":723},{"class":152},[724],{"type":32,"value":166},{"type":26,"tag":110,"props":726,"children":727},{"class":158},[728],{"type":32,"value":729},"static",{"type":26,"tag":110,"props":731,"children":732},{"class":152},[733],{"type":32,"value":166},{"type":26,"tag":110,"props":735,"children":736},{"class":158},[737],{"type":32,"value":383},{"type":26,"tag":110,"props":739,"children":740},{"class":152},[741],{"type":32,"value":166},{"type":26,"tag":110,"props":743,"children":744},{"class":180},[745],{"type":32,"value":746},"internalException",{"type":26,"tag":110,"props":748,"children":749},{"class":152},[750],{"type":32,"value":582},{"type":26,"tag":110,"props":752,"children":753},{"class":112,"line":139},[754],{"type":26,"tag":110,"props":755,"children":756},{"class":152},[757],{"type":32,"value":758},"    {\n",{"type":26,"tag":110,"props":760,"children":761},{"class":112,"line":148},[762,766,770,774,779,783,787,791,795,800,804,809,814],{"type":26,"tag":110,"props":763,"children":764},{"class":152},[765],{"type":32,"value":468},{"type":26,"tag":110,"props":767,"children":768},{"class":158},[769],{"type":32,"value":505},{"type":26,"tag":110,"props":771,"children":772},{"class":152},[773],{"type":32,"value":166},{"type":26,"tag":110,"props":775,"children":776},{"class":158},[777],{"type":32,"value":778},"new",{"type":26,"tag":110,"props":780,"children":781},{"class":152},[782],{"type":32,"value":166},{"type":26,"tag":110,"props":784,"children":785},{"class":442},[786],{"type":32,"value":729},{"type":26,"tag":110,"props":788,"children":789},{"class":152},[790],{"type":32,"value":188},{"type":26,"tag":110,"props":792,"children":793},{"class":191},[794],{"type":32,"value":194},{"type":26,"tag":110,"props":796,"children":797},{"class":197},[798],{"type":32,"value":799},"An internal Exception Ocurred!",{"type":26,"tag":110,"props":801,"children":802},{"class":191},[803],{"type":32,"value":194},{"type":26,"tag":110,"props":805,"children":806},{"class":152},[807],{"type":32,"value":808},", ",{"type":26,"tag":110,"props":810,"children":811},{"class":310},[812],{"type":32,"value":813},"500",{"type":26,"tag":110,"props":815,"children":816},{"class":152},[817],{"type":32,"value":818},");\n",{"type":26,"tag":110,"props":820,"children":821},{"class":112,"line":535},[822],{"type":26,"tag":110,"props":823,"children":824},{"class":152},[825],{"type":32,"value":826},"    }\n",{"type":26,"tag":110,"props":828,"children":829},{"class":112,"line":585},[830],{"type":26,"tag":110,"props":831,"children":832},{"class":152},[833],{"type":32,"value":834},"}\n",{"type":26,"tag":110,"props":836,"children":837},{"class":112,"line":608},[838],{"type":26,"tag":110,"props":839,"children":840},{},[],{"type":26,"tag":110,"props":842,"children":843},{"class":112,"line":617},[844,848,852,857,861,865,869],{"type":26,"tag":110,"props":845,"children":846},{"class":158},[847],{"type":32,"value":674},{"type":26,"tag":110,"props":849,"children":850},{"class":152},[851],{"type":32,"value":166},{"type":26,"tag":110,"props":853,"children":854},{"class":681},[855],{"type":32,"value":856},"TicketsException",{"type":26,"tag":110,"props":858,"children":859},{"class":152},[860],{"type":32,"value":166},{"type":26,"tag":110,"props":862,"children":863},{"class":158},[864],{"type":32,"value":693},{"type":26,"tag":110,"props":866,"children":867},{"class":152},[868],{"type":32,"value":166},{"type":26,"tag":110,"props":870,"children":871},{"class":442},[872],{"type":32,"value":873},"CustomException\n",{"type":26,"tag":110,"props":875,"children":876},{"class":112,"line":10},[877],{"type":26,"tag":110,"props":878,"children":879},{"class":152},[880],{"type":32,"value":405},{"type":26,"tag":110,"props":882,"children":884},{"class":112,"line":883},11,[885,889,893,897,901,905,909,913,918],{"type":26,"tag":110,"props":886,"children":887},{"class":152},[888],{"type":32,"value":413},{"type":26,"tag":110,"props":890,"children":891},{"class":158},[892],{"type":32,"value":374},{"type":26,"tag":110,"props":894,"children":895},{"class":152},[896],{"type":32,"value":166},{"type":26,"tag":110,"props":898,"children":899},{"class":158},[900],{"type":32,"value":729},{"type":26,"tag":110,"props":902,"children":903},{"class":152},[904],{"type":32,"value":166},{"type":26,"tag":110,"props":906,"children":907},{"class":158},[908],{"type":32,"value":383},{"type":26,"tag":110,"props":910,"children":911},{"class":152},[912],{"type":32,"value":166},{"type":26,"tag":110,"props":914,"children":915},{"class":180},[916],{"type":32,"value":917},"noMoreTicketsAvailable",{"type":26,"tag":110,"props":919,"children":920},{"class":152},[921],{"type":32,"value":582},{"type":26,"tag":110,"props":923,"children":925},{"class":112,"line":924},12,[926],{"type":26,"tag":110,"props":927,"children":928},{"class":152},[929],{"type":32,"value":758},{"type":26,"tag":110,"props":931,"children":933},{"class":112,"line":932},13,[934,938,942,946,950,954,958,962,966,971,975,979,984],{"type":26,"tag":110,"props":935,"children":936},{"class":152},[937],{"type":32,"value":468},{"type":26,"tag":110,"props":939,"children":940},{"class":158},[941],{"type":32,"value":505},{"type":26,"tag":110,"props":943,"children":944},{"class":152},[945],{"type":32,"value":166},{"type":26,"tag":110,"props":947,"children":948},{"class":158},[949],{"type":32,"value":778},{"type":26,"tag":110,"props":951,"children":952},{"class":152},[953],{"type":32,"value":166},{"type":26,"tag":110,"props":955,"children":956},{"class":442},[957],{"type":32,"value":729},{"type":26,"tag":110,"props":959,"children":960},{"class":152},[961],{"type":32,"value":188},{"type":26,"tag":110,"props":963,"children":964},{"class":191},[965],{"type":32,"value":194},{"type":26,"tag":110,"props":967,"children":968},{"class":197},[969],{"type":32,"value":970},"No More Tickets Available",{"type":26,"tag":110,"props":972,"children":973},{"class":191},[974],{"type":32,"value":194},{"type":26,"tag":110,"props":976,"children":977},{"class":152},[978],{"type":32,"value":808},{"type":26,"tag":110,"props":980,"children":981},{"class":310},[982],{"type":32,"value":983},"404",{"type":26,"tag":110,"props":985,"children":986},{"class":152},[987],{"type":32,"value":818},{"type":26,"tag":110,"props":989,"children":991},{"class":112,"line":990},14,[992],{"type":26,"tag":110,"props":993,"children":994},{"class":152},[995],{"type":32,"value":826},{"type":26,"tag":110,"props":997,"children":999},{"class":112,"line":998},15,[1000],{"type":26,"tag":110,"props":1001,"children":1002},{"class":152},[1003],{"type":32,"value":631},{"type":26,"tag":35,"props":1005,"children":1006},{},[1007,1009],{"type":32,"value":1008},"Now in any place of your code you can throw a ",{"type":26,"tag":41,"props":1010,"children":1011},{},[1012],{"type":32,"value":1013},"custom exception",{"type":26,"tag":100,"props":1015,"children":1017},{"className":102,"code":1016,"language":104,"meta":7},"throw TicketsException::noMoreTicketsAvailable();\n",[1018],{"type":26,"tag":41,"props":1019,"children":1020},{"__ignoreMap":7},[1021],{"type":26,"tag":110,"props":1022,"children":1023},{"class":112,"line":113},[1024,1029,1033,1037,1042,1046],{"type":26,"tag":110,"props":1025,"children":1026},{"class":158},[1027],{"type":32,"value":1028},"throw",{"type":26,"tag":110,"props":1030,"children":1031},{"class":152},[1032],{"type":32,"value":166},{"type":26,"tag":110,"props":1034,"children":1035},{"class":442},[1036],{"type":32,"value":856},{"type":26,"tag":110,"props":1038,"children":1039},{"class":158},[1040],{"type":32,"value":1041},"::",{"type":26,"tag":110,"props":1043,"children":1044},{"class":180},[1045],{"type":32,"value":917},{"type":26,"tag":110,"props":1047,"children":1048},{"class":152},[1049],{"type":32,"value":1050},"();",{"type":26,"tag":35,"props":1052,"children":1053},{},[1054,1056],{"type":32,"value":1055},"And it should show your custom message with the custom ",{"type":26,"tag":41,"props":1057,"children":1058},{},[1059],{"type":32,"value":1060},"status code",{"type":26,"tag":27,"props":1062,"children":1064},{"id":1063},"testing-custom-exceptions",[1065],{"type":32,"value":1066},"Testing Custom Exceptions",{"type":26,"tag":100,"props":1068,"children":1070},{"className":102,"code":1069,"language":104,"meta":7},"public function some_test()\n{\n    $this->withoutExceptionHandling();\n    \n    $this->assertExpectExceptionObject(\n        TicketsException::noMoreTicketsAvailable()\n    );\n    \n    // ...\n    \n    $response $this->postJson('api/tickets/purchase');\n}\n",[1071],{"type":26,"tag":41,"props":1072,"children":1073},{"__ignoreMap":7},[1074,1102,1109,1134,1142,1167,1190,1198,1205,1217,1224,1265],{"type":26,"tag":110,"props":1075,"children":1076},{"class":112,"line":113},[1077,1081,1085,1089,1093,1098],{"type":26,"tag":110,"props":1078,"children":1079},{"class":158},[1080],{"type":32,"value":374},{"type":26,"tag":110,"props":1082,"children":1083},{"class":152},[1084],{"type":32,"value":166},{"type":26,"tag":110,"props":1086,"children":1087},{"class":158},[1088],{"type":32,"value":383},{"type":26,"tag":110,"props":1090,"children":1091},{"class":152},[1092],{"type":32,"value":166},{"type":26,"tag":110,"props":1094,"children":1095},{"class":180},[1096],{"type":32,"value":1097},"some_test",{"type":26,"tag":110,"props":1099,"children":1100},{"class":152},[1101],{"type":32,"value":582},{"type":26,"tag":110,"props":1103,"children":1104},{"class":112,"line":123},[1105],{"type":26,"tag":110,"props":1106,"children":1107},{"class":152},[1108],{"type":32,"value":405},{"type":26,"tag":110,"props":1110,"children":1111},{"class":112,"line":132},[1112,1116,1120,1124,1129],{"type":26,"tag":110,"props":1113,"children":1114},{"class":152},[1115],{"type":32,"value":413},{"type":26,"tag":110,"props":1117,"children":1118},{"class":169},[1119],{"type":32,"value":172},{"type":26,"tag":110,"props":1121,"children":1122},{"class":158},[1123],{"type":32,"value":177},{"type":26,"tag":110,"props":1125,"children":1126},{"class":180},[1127],{"type":32,"value":1128},"withoutExceptionHandling",{"type":26,"tag":110,"props":1130,"children":1131},{"class":152},[1132],{"type":32,"value":1133},"();\n",{"type":26,"tag":110,"props":1135,"children":1136},{"class":112,"line":139},[1137],{"type":26,"tag":110,"props":1138,"children":1139},{"class":152},[1140],{"type":32,"value":1141},"    \n",{"type":26,"tag":110,"props":1143,"children":1144},{"class":112,"line":148},[1145,1149,1153,1157,1162],{"type":26,"tag":110,"props":1146,"children":1147},{"class":152},[1148],{"type":32,"value":413},{"type":26,"tag":110,"props":1150,"children":1151},{"class":169},[1152],{"type":32,"value":172},{"type":26,"tag":110,"props":1154,"children":1155},{"class":158},[1156],{"type":32,"value":177},{"type":26,"tag":110,"props":1158,"children":1159},{"class":180},[1160],{"type":32,"value":1161},"assertExpectExceptionObject",{"type":26,"tag":110,"props":1163,"children":1164},{"class":152},[1165],{"type":32,"value":1166},"(\n",{"type":26,"tag":110,"props":1168,"children":1169},{"class":112,"line":535},[1170,1174,1178,1182,1186],{"type":26,"tag":110,"props":1171,"children":1172},{"class":152},[1173],{"type":32,"value":468},{"type":26,"tag":110,"props":1175,"children":1176},{"class":442},[1177],{"type":32,"value":856},{"type":26,"tag":110,"props":1179,"children":1180},{"class":158},[1181],{"type":32,"value":1041},{"type":26,"tag":110,"props":1183,"children":1184},{"class":180},[1185],{"type":32,"value":917},{"type":26,"tag":110,"props":1187,"children":1188},{"class":152},[1189],{"type":32,"value":582},{"type":26,"tag":110,"props":1191,"children":1192},{"class":112,"line":585},[1193],{"type":26,"tag":110,"props":1194,"children":1195},{"class":152},[1196],{"type":32,"value":1197},"    );\n",{"type":26,"tag":110,"props":1199,"children":1200},{"class":112,"line":608},[1201],{"type":26,"tag":110,"props":1202,"children":1203},{"class":152},[1204],{"type":32,"value":1141},{"type":26,"tag":110,"props":1206,"children":1207},{"class":112,"line":617},[1208,1212],{"type":26,"tag":110,"props":1209,"children":1210},{"class":152},[1211],{"type":32,"value":413},{"type":26,"tag":110,"props":1213,"children":1214},{"class":117},[1215],{"type":32,"value":1216},"// ...\n",{"type":26,"tag":110,"props":1218,"children":1219},{"class":112,"line":10},[1220],{"type":26,"tag":110,"props":1221,"children":1222},{"class":152},[1223],{"type":32,"value":1141},{"type":26,"tag":110,"props":1225,"children":1226},{"class":112,"line":883},[1227,1232,1236,1240,1244,1248,1252,1257,1261],{"type":26,"tag":110,"props":1228,"children":1229},{"class":152},[1230],{"type":32,"value":1231},"    $response ",{"type":26,"tag":110,"props":1233,"children":1234},{"class":169},[1235],{"type":32,"value":172},{"type":26,"tag":110,"props":1237,"children":1238},{"class":158},[1239],{"type":32,"value":177},{"type":26,"tag":110,"props":1241,"children":1242},{"class":180},[1243],{"type":32,"value":183},{"type":26,"tag":110,"props":1245,"children":1246},{"class":152},[1247],{"type":32,"value":188},{"type":26,"tag":110,"props":1249,"children":1250},{"class":191},[1251],{"type":32,"value":194},{"type":26,"tag":110,"props":1253,"children":1254},{"class":197},[1255],{"type":32,"value":1256},"api/tickets/purchase",{"type":26,"tag":110,"props":1258,"children":1259},{"class":191},[1260],{"type":32,"value":194},{"type":26,"tag":110,"props":1262,"children":1263},{"class":152},[1264],{"type":32,"value":818},{"type":26,"tag":110,"props":1266,"children":1267},{"class":112,"line":924},[1268],{"type":26,"tag":110,"props":1269,"children":1270},{"class":152},[1271],{"type":32,"value":631},{"type":26,"tag":35,"props":1273,"children":1274},{},[1275],{"type":26,"tag":274,"props":1276,"children":1277},{},[1278],{"type":32,"value":1279},"Take in Mind",{"type":26,"tag":35,"props":1281,"children":1282},{},[1283,1285,1290,1292,1297,1299,1304,1306,1311,1313,1318,1320,1325,1327],{"type":32,"value":1284},"As now ",{"type":26,"tag":41,"props":1286,"children":1287},{},[1288],{"type":32,"value":1289},"exceptions",{"type":32,"value":1291}," are ",{"type":26,"tag":41,"props":1293,"children":1294},{},[1295],{"type":32,"value":1296},"custom objects",{"type":32,"value":1298}," you are able to add as many ",{"type":26,"tag":41,"props":1300,"children":1301},{},[1302],{"type":32,"value":1303},"methods",{"type":32,"value":1305}," as it is required\nto add more ",{"type":26,"tag":41,"props":1307,"children":1308},{},[1309],{"type":32,"value":1310},"details",{"type":32,"value":1312}," or ",{"type":26,"tag":41,"props":1314,"children":1315},{},[1316],{"type":32,"value":1317},"constants",{"type":32,"value":1319}," / ",{"type":26,"tag":41,"props":1321,"children":1322},{},[1323],{"type":32,"value":1324},"enums",{"type":32,"value":1326}," to handle ",{"type":26,"tag":41,"props":1328,"children":1329},{},[1330],{"type":32,"value":1331},"exception statuses",{"type":26,"tag":35,"props":1333,"children":1334},{},[1335,1337,1342],{"type":32,"value":1336},"So just to keep it simple we are going to use ",{"type":26,"tag":41,"props":1338,"children":1339},{},[1340],{"type":32,"value":1341},"Symfony Http Response",{"type":32,"value":1343},", but it could grow to a backed enum if it is required",{"type":26,"tag":100,"props":1345,"children":1347},{"className":102,"code":1346,"language":104,"meta":7},"class TicketsException extends CustomException\n{\n    public static function noMoreTicketsAvailable()\n    {\n        return new static('No More Tickets Available', Response::NOT_FOUND);\n    }\n}\n",[1348],{"type":26,"tag":41,"props":1349,"children":1350},{"__ignoreMap":7},[1351,1382,1389,1428,1435,1500,1507],{"type":26,"tag":110,"props":1352,"children":1353},{"class":112,"line":113},[1354,1358,1362,1366,1370,1374,1378],{"type":26,"tag":110,"props":1355,"children":1356},{"class":158},[1357],{"type":32,"value":674},{"type":26,"tag":110,"props":1359,"children":1360},{"class":152},[1361],{"type":32,"value":166},{"type":26,"tag":110,"props":1363,"children":1364},{"class":681},[1365],{"type":32,"value":856},{"type":26,"tag":110,"props":1367,"children":1368},{"class":152},[1369],{"type":32,"value":166},{"type":26,"tag":110,"props":1371,"children":1372},{"class":158},[1373],{"type":32,"value":693},{"type":26,"tag":110,"props":1375,"children":1376},{"class":152},[1377],{"type":32,"value":166},{"type":26,"tag":110,"props":1379,"children":1380},{"class":442},[1381],{"type":32,"value":873},{"type":26,"tag":110,"props":1383,"children":1384},{"class":112,"line":123},[1385],{"type":26,"tag":110,"props":1386,"children":1387},{"class":152},[1388],{"type":32,"value":405},{"type":26,"tag":110,"props":1390,"children":1391},{"class":112,"line":132},[1392,1396,1400,1404,1408,1412,1416,1420,1424],{"type":26,"tag":110,"props":1393,"children":1394},{"class":152},[1395],{"type":32,"value":413},{"type":26,"tag":110,"props":1397,"children":1398},{"class":158},[1399],{"type":32,"value":374},{"type":26,"tag":110,"props":1401,"children":1402},{"class":152},[1403],{"type":32,"value":166},{"type":26,"tag":110,"props":1405,"children":1406},{"class":158},[1407],{"type":32,"value":729},{"type":26,"tag":110,"props":1409,"children":1410},{"class":152},[1411],{"type":32,"value":166},{"type":26,"tag":110,"props":1413,"children":1414},{"class":158},[1415],{"type":32,"value":383},{"type":26,"tag":110,"props":1417,"children":1418},{"class":152},[1419],{"type":32,"value":166},{"type":26,"tag":110,"props":1421,"children":1422},{"class":180},[1423],{"type":32,"value":917},{"type":26,"tag":110,"props":1425,"children":1426},{"class":152},[1427],{"type":32,"value":582},{"type":26,"tag":110,"props":1429,"children":1430},{"class":112,"line":139},[1431],{"type":26,"tag":110,"props":1432,"children":1433},{"class":152},[1434],{"type":32,"value":758},{"type":26,"tag":110,"props":1436,"children":1437},{"class":112,"line":148},[1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1478,1482,1487,1491,1496],{"type":26,"tag":110,"props":1439,"children":1440},{"class":152},[1441],{"type":32,"value":468},{"type":26,"tag":110,"props":1443,"children":1444},{"class":158},[1445],{"type":32,"value":505},{"type":26,"tag":110,"props":1447,"children":1448},{"class":152},[1449],{"type":32,"value":166},{"type":26,"tag":110,"props":1451,"children":1452},{"class":158},[1453],{"type":32,"value":778},{"type":26,"tag":110,"props":1455,"children":1456},{"class":152},[1457],{"type":32,"value":166},{"type":26,"tag":110,"props":1459,"children":1460},{"class":442},[1461],{"type":32,"value":729},{"type":26,"tag":110,"props":1463,"children":1464},{"class":152},[1465],{"type":32,"value":188},{"type":26,"tag":110,"props":1467,"children":1468},{"class":191},[1469],{"type":32,"value":194},{"type":26,"tag":110,"props":1471,"children":1472},{"class":197},[1473],{"type":32,"value":970},{"type":26,"tag":110,"props":1475,"children":1476},{"class":191},[1477],{"type":32,"value":194},{"type":26,"tag":110,"props":1479,"children":1480},{"class":152},[1481],{"type":32,"value":808},{"type":26,"tag":110,"props":1483,"children":1484},{"class":442},[1485],{"type":32,"value":1486},"Response",{"type":26,"tag":110,"props":1488,"children":1489},{"class":158},[1490],{"type":32,"value":1041},{"type":26,"tag":110,"props":1492,"children":1493},{"class":310},[1494],{"type":32,"value":1495},"NOT_FOUND",{"type":26,"tag":110,"props":1497,"children":1498},{"class":152},[1499],{"type":32,"value":818},{"type":26,"tag":110,"props":1501,"children":1502},{"class":112,"line":535},[1503],{"type":26,"tag":110,"props":1504,"children":1505},{"class":152},[1506],{"type":32,"value":826},{"type":26,"tag":110,"props":1508,"children":1509},{"class":112,"line":585},[1510],{"type":26,"tag":110,"props":1511,"children":1512},{"class":152},[1513],{"type":32,"value":631},{"type":26,"tag":35,"props":1515,"children":1516},{},[1517],{"type":32,"value":1518},"Thanks for reading!",{"type":26,"tag":1520,"props":1521,"children":1522},"style",{},[1523],{"type":32,"value":1524},".dracula{color:#F8F8F2;background:#282A36;}.ct-784317{color:#6272A4;}.ct-183901{color:#F8F8F2;}.ct-166232{color:#FF79C6;}.ct-531775{color:#BD93F9;font-style:italic;}.ct-711500{color:#50FA7B;}.ct-882767{color:#E9F284;}.ct-035036{color:#F1FA8C;}.ct-531774{color:#BD93F9;}.ct-432594{color:#8BE9FD;font-style:italic;}.ct-432593{color:#8BE9FD;}",{"title":7,"searchDepth":123,"depth":123,"links":1526},[1527,1528,1529,1530,1531],{"id":29,"depth":123,"text":33},{"id":83,"depth":123,"text":86},{"id":212,"depth":123,"text":215},{"id":645,"depth":123,"text":648},{"id":1063,"depth":123,"text":1066},"markdown","content:blog:10-show-api-exceptions-in-laravel.md","content","blog/10-show-api-exceptions-in-laravel.md","md",1697073120066]