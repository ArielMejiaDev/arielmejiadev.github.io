[{"data":1,"prerenderedAt":854},["Reactive",2],{"post-12-fix-ambiguous-column-eloquent-exception":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"id":10,"published":11,"date":12,"cover_image":13,"tags":14,"announcement_banner":16,"announcement_link":16,"readingTime":17,"body":22,"_type":849,"_id":850,"_source":851,"_file":852,"_extension":853},"/blog/12-fix-ambiguous-column-eloquent-exception","blog",false,"","Fix - Ambiguous Column Eloquent Query Exception in Laravel","Get only the columns that your query requires from a model, and it's relationship without issues",12,true,"October 14th, 2020","https://dev-to-uploads.s3.amazonaws.com/i/c5vik4dlgowawfh51h6t.png",[15],"Laravel",null,{"text":18,"minutes":19,"time":20,"words":21},"1 min read",0.66,39600,132,{"type":23,"children":24,"toc":845},"root",[25,30,70,74,79,86,207,213,306,321,385,407,449,454,581,617,642,726,738,834,839],{"type":26,"tag":27,"props":28,"children":29},"element","hr",{"id":7},[],{"type":26,"tag":31,"props":32,"children":33},"p",{},[34,41,43,49,51,56,58,63,65],{"type":26,"tag":35,"props":36,"children":37},"strong",{},[38],{"type":39,"value":40},"text","Issue",{"type":39,"value":42},": An ",{"type":26,"tag":44,"props":45,"children":46},"code",{},[47],{"type":39,"value":48},"Eloquent",{"type":39,"value":50}," Model with a ",{"type":26,"tag":44,"props":52,"children":53},{},[54],{"type":39,"value":55},"relationship",{"type":39,"value":57},", both have a ",{"type":26,"tag":44,"props":59,"children":60},{},[61],{"type":39,"value":62},"column",{"type":39,"value":64}," that matches the same ",{"type":26,"tag":44,"props":66,"children":67},{},[68],{"type":39,"value":69},"name",{"type":26,"tag":27,"props":71,"children":73},{"id":72},"_1",[],{"type":26,"tag":31,"props":75,"children":76},{},[77],{"type":39,"value":78},"Let's check an example to show how to fix it",{"type":26,"tag":80,"props":81,"children":83},"h2",{"id":82},"user-model",[84],{"type":39,"value":85},"User Model:",{"type":26,"tag":87,"props":88,"children":92},"pre",{"className":89,"code":90,"language":91,"meta":7},"language-php dracula","public function teams()\n{\n    return $this->belongsToMany(Team::class);\n}\n","php",[93],{"type":26,"tag":44,"props":94,"children":95},{"__ignoreMap":7},[96,134,143,198],{"type":26,"tag":97,"props":98,"children":101},"span",{"class":99,"line":100},"line",1,[102,108,114,119,123,129],{"type":26,"tag":97,"props":103,"children":105},{"class":104},"ct-166232",[106],{"type":39,"value":107},"public",{"type":26,"tag":97,"props":109,"children":111},{"class":110},"ct-183901",[112],{"type":39,"value":113}," ",{"type":26,"tag":97,"props":115,"children":116},{"class":104},[117],{"type":39,"value":118},"function",{"type":26,"tag":97,"props":120,"children":121},{"class":110},[122],{"type":39,"value":113},{"type":26,"tag":97,"props":124,"children":126},{"class":125},"ct-711500",[127],{"type":39,"value":128},"teams",{"type":26,"tag":97,"props":130,"children":131},{"class":110},[132],{"type":39,"value":133},"()\n",{"type":26,"tag":97,"props":135,"children":137},{"class":99,"line":136},2,[138],{"type":26,"tag":97,"props":139,"children":140},{"class":110},[141],{"type":39,"value":142},"{\n",{"type":26,"tag":97,"props":144,"children":146},{"class":99,"line":145},3,[147,152,157,161,167,172,177,182,188,193],{"type":26,"tag":97,"props":148,"children":149},{"class":110},[150],{"type":39,"value":151},"    ",{"type":26,"tag":97,"props":153,"children":154},{"class":104},[155],{"type":39,"value":156},"return",{"type":26,"tag":97,"props":158,"children":159},{"class":110},[160],{"type":39,"value":113},{"type":26,"tag":97,"props":162,"children":164},{"class":163},"ct-531775",[165],{"type":39,"value":166},"$this",{"type":26,"tag":97,"props":168,"children":169},{"class":104},[170],{"type":39,"value":171},"->",{"type":26,"tag":97,"props":173,"children":174},{"class":125},[175],{"type":39,"value":176},"belongsToMany",{"type":26,"tag":97,"props":178,"children":179},{"class":110},[180],{"type":39,"value":181},"(",{"type":26,"tag":97,"props":183,"children":185},{"class":184},"ct-432594",[186],{"type":39,"value":187},"Team",{"type":26,"tag":97,"props":189,"children":190},{"class":104},[191],{"type":39,"value":192},"::class",{"type":26,"tag":97,"props":194,"children":195},{"class":110},[196],{"type":39,"value":197},");\n",{"type":26,"tag":97,"props":199,"children":201},{"class":99,"line":200},4,[202],{"type":26,"tag":97,"props":203,"children":204},{"class":110},[205],{"type":39,"value":206},"}",{"type":26,"tag":80,"props":208,"children":210},{"id":209},"team-model",[211],{"type":39,"value":212},"Team Model",{"type":26,"tag":87,"props":214,"children":216},{"className":89,"code":215,"language":91,"meta":7},"public function users()\n{\n    return $this->belongsToMany(User::class);\n}\n",[217],{"type":26,"tag":44,"props":218,"children":219},{"__ignoreMap":7},[220,248,255,299],{"type":26,"tag":97,"props":221,"children":222},{"class":99,"line":100},[223,227,231,235,239,244],{"type":26,"tag":97,"props":224,"children":225},{"class":104},[226],{"type":39,"value":107},{"type":26,"tag":97,"props":228,"children":229},{"class":110},[230],{"type":39,"value":113},{"type":26,"tag":97,"props":232,"children":233},{"class":104},[234],{"type":39,"value":118},{"type":26,"tag":97,"props":236,"children":237},{"class":110},[238],{"type":39,"value":113},{"type":26,"tag":97,"props":240,"children":241},{"class":125},[242],{"type":39,"value":243},"users",{"type":26,"tag":97,"props":245,"children":246},{"class":110},[247],{"type":39,"value":133},{"type":26,"tag":97,"props":249,"children":250},{"class":99,"line":136},[251],{"type":26,"tag":97,"props":252,"children":253},{"class":110},[254],{"type":39,"value":142},{"type":26,"tag":97,"props":256,"children":257},{"class":99,"line":145},[258,262,266,270,274,278,282,286,291,295],{"type":26,"tag":97,"props":259,"children":260},{"class":110},[261],{"type":39,"value":151},{"type":26,"tag":97,"props":263,"children":264},{"class":104},[265],{"type":39,"value":156},{"type":26,"tag":97,"props":267,"children":268},{"class":110},[269],{"type":39,"value":113},{"type":26,"tag":97,"props":271,"children":272},{"class":163},[273],{"type":39,"value":166},{"type":26,"tag":97,"props":275,"children":276},{"class":104},[277],{"type":39,"value":171},{"type":26,"tag":97,"props":279,"children":280},{"class":125},[281],{"type":39,"value":176},{"type":26,"tag":97,"props":283,"children":284},{"class":110},[285],{"type":39,"value":181},{"type":26,"tag":97,"props":287,"children":288},{"class":184},[289],{"type":39,"value":290},"User",{"type":26,"tag":97,"props":292,"children":293},{"class":104},[294],{"type":39,"value":192},{"type":26,"tag":97,"props":296,"children":297},{"class":110},[298],{"type":39,"value":197},{"type":26,"tag":97,"props":300,"children":301},{"class":99,"line":200},[302],{"type":26,"tag":97,"props":303,"children":304},{"class":110},[305],{"type":39,"value":206},{"type":26,"tag":31,"props":307,"children":308},{},[309,311,315,317],{"type":39,"value":310},"Then you can attach ",{"type":26,"tag":44,"props":312,"children":313},{},[314],{"type":39,"value":243},{"type":39,"value":316}," to ",{"type":26,"tag":44,"props":318,"children":319},{},[320],{"type":39,"value":128},{"type":26,"tag":87,"props":322,"children":324},{"className":89,"code":323,"language":91,"meta":7},"Team::users()->attach(auth()->user());\n",[325],{"type":26,"tag":44,"props":326,"children":327},{"__ignoreMap":7},[328],{"type":26,"tag":97,"props":329,"children":330},{"class":99,"line":100},[331,335,340,344,349,353,358,362,367,371,375,380],{"type":26,"tag":97,"props":332,"children":333},{"class":184},[334],{"type":39,"value":187},{"type":26,"tag":97,"props":336,"children":337},{"class":104},[338],{"type":39,"value":339},"::",{"type":26,"tag":97,"props":341,"children":342},{"class":125},[343],{"type":39,"value":243},{"type":26,"tag":97,"props":345,"children":346},{"class":110},[347],{"type":39,"value":348},"()",{"type":26,"tag":97,"props":350,"children":351},{"class":104},[352],{"type":39,"value":171},{"type":26,"tag":97,"props":354,"children":355},{"class":125},[356],{"type":39,"value":357},"attach",{"type":26,"tag":97,"props":359,"children":360},{"class":110},[361],{"type":39,"value":181},{"type":26,"tag":97,"props":363,"children":364},{"class":125},[365],{"type":39,"value":366},"auth",{"type":26,"tag":97,"props":368,"children":369},{"class":110},[370],{"type":39,"value":348},{"type":26,"tag":97,"props":372,"children":373},{"class":104},[374],{"type":39,"value":171},{"type":26,"tag":97,"props":376,"children":377},{"class":125},[378],{"type":39,"value":379},"user",{"type":26,"tag":97,"props":381,"children":382},{"class":110},[383],{"type":39,"value":384},"());",{"type":26,"tag":31,"props":386,"children":387},{},[388,390,395,397,401,403],{"type":39,"value":389},"And now you can get a ",{"type":26,"tag":44,"props":391,"children":392},{},[393],{"type":39,"value":394},"collection",{"type":39,"value":396}," of ",{"type":26,"tag":44,"props":398,"children":399},{},[400],{"type":39,"value":243},{"type":39,"value":402}," by ",{"type":26,"tag":44,"props":404,"children":405},{},[406],{"type":39,"value":128},{"type":26,"tag":87,"props":408,"children":410},{"className":89,"code":409,"language":91,"meta":7},"$users = Team::users;\n",[411],{"type":26,"tag":44,"props":412,"children":413},{"__ignoreMap":7},[414],{"type":26,"tag":97,"props":415,"children":416},{"class":99,"line":100},[417,422,427,431,435,439,444],{"type":26,"tag":97,"props":418,"children":419},{"class":110},[420],{"type":39,"value":421},"$users ",{"type":26,"tag":97,"props":423,"children":424},{"class":104},[425],{"type":39,"value":426},"=",{"type":26,"tag":97,"props":428,"children":429},{"class":110},[430],{"type":39,"value":113},{"type":26,"tag":97,"props":432,"children":433},{"class":184},[434],{"type":39,"value":187},{"type":26,"tag":97,"props":436,"children":437},{"class":104},[438],{"type":39,"value":339},{"type":26,"tag":97,"props":440,"children":442},{"class":441},"ct-531774",[443],{"type":39,"value":243},{"type":26,"tag":97,"props":445,"children":446},{"class":110},[447],{"type":39,"value":448},";",{"type":26,"tag":31,"props":450,"children":451},{},[452],{"type":39,"value":453},"Ok here all fine, maybe you need to pass data to an API,\nand it's a better approach to get only the data that is required",{"type":26,"tag":87,"props":455,"children":457},{"className":89,"code":456,"language":91,"meta":7},"$team = Team::first();\n$team->users()->select(['name', 'email'])->get();\n",[458],{"type":26,"tag":44,"props":459,"children":460},{"__ignoreMap":7},[461,495],{"type":26,"tag":97,"props":462,"children":463},{"class":99,"line":100},[464,469,473,477,481,485,490],{"type":26,"tag":97,"props":465,"children":466},{"class":110},[467],{"type":39,"value":468},"$team ",{"type":26,"tag":97,"props":470,"children":471},{"class":104},[472],{"type":39,"value":426},{"type":26,"tag":97,"props":474,"children":475},{"class":110},[476],{"type":39,"value":113},{"type":26,"tag":97,"props":478,"children":479},{"class":184},[480],{"type":39,"value":187},{"type":26,"tag":97,"props":482,"children":483},{"class":104},[484],{"type":39,"value":339},{"type":26,"tag":97,"props":486,"children":487},{"class":125},[488],{"type":39,"value":489},"first",{"type":26,"tag":97,"props":491,"children":492},{"class":110},[493],{"type":39,"value":494},"();\n",{"type":26,"tag":97,"props":496,"children":497},{"class":99,"line":136},[498,503,507,511,515,519,524,529,535,540,544,549,553,558,562,567,571,576],{"type":26,"tag":97,"props":499,"children":500},{"class":110},[501],{"type":39,"value":502},"$team",{"type":26,"tag":97,"props":504,"children":505},{"class":104},[506],{"type":39,"value":171},{"type":26,"tag":97,"props":508,"children":509},{"class":125},[510],{"type":39,"value":243},{"type":26,"tag":97,"props":512,"children":513},{"class":110},[514],{"type":39,"value":348},{"type":26,"tag":97,"props":516,"children":517},{"class":104},[518],{"type":39,"value":171},{"type":26,"tag":97,"props":520,"children":521},{"class":125},[522],{"type":39,"value":523},"select",{"type":26,"tag":97,"props":525,"children":526},{"class":110},[527],{"type":39,"value":528},"([",{"type":26,"tag":97,"props":530,"children":532},{"class":531},"ct-882767",[533],{"type":39,"value":534},"'",{"type":26,"tag":97,"props":536,"children":538},{"class":537},"ct-035036",[539],{"type":39,"value":69},{"type":26,"tag":97,"props":541,"children":542},{"class":531},[543],{"type":39,"value":534},{"type":26,"tag":97,"props":545,"children":546},{"class":110},[547],{"type":39,"value":548},", ",{"type":26,"tag":97,"props":550,"children":551},{"class":531},[552],{"type":39,"value":534},{"type":26,"tag":97,"props":554,"children":555},{"class":537},[556],{"type":39,"value":557},"email",{"type":26,"tag":97,"props":559,"children":560},{"class":531},[561],{"type":39,"value":534},{"type":26,"tag":97,"props":563,"children":564},{"class":110},[565],{"type":39,"value":566},"])",{"type":26,"tag":97,"props":568,"children":569},{"class":104},[570],{"type":39,"value":171},{"type":26,"tag":97,"props":572,"children":573},{"class":125},[574],{"type":39,"value":575},"get",{"type":26,"tag":97,"props":577,"children":578},{"class":110},[579],{"type":39,"value":580},"();",{"type":26,"tag":31,"props":582,"children":583},{},[584,586,591,593,597,599,603,605,609,611,615],{"type":39,"value":585},"Here you would see an ",{"type":26,"tag":44,"props":587,"children":588},{},[589],{"type":39,"value":590},"eloquent",{"type":39,"value":592}," exception, this is because the ",{"type":26,"tag":44,"props":594,"children":595},{},[596],{"type":39,"value":290},{"type":39,"value":598}," model has a column ",{"type":26,"tag":44,"props":600,"children":601},{},[602],{"type":39,"value":69},{"type":39,"value":604},"\nand ",{"type":26,"tag":44,"props":606,"children":607},{},[608],{"type":39,"value":187},{"type":39,"value":610}," model could have a column ",{"type":26,"tag":44,"props":612,"children":613},{},[614],{"type":39,"value":69},{"type":39,"value":616}," too,",{"type":26,"tag":31,"props":618,"children":619},{},[620,622,626,628,633,635,640],{"type":39,"value":621},"Don't worry like all in ",{"type":26,"tag":44,"props":623,"children":624},{},[625],{"type":39,"value":15},{"type":39,"value":627}," is really easy, just be explicit with the ",{"type":26,"tag":44,"props":629,"children":630},{},[631],{"type":39,"value":632},"table",{"type":39,"value":634}," and the ",{"type":26,"tag":44,"props":636,"children":637},{},[638],{"type":39,"value":639},"columns",{"type":39,"value":641}," that you need",{"type":26,"tag":87,"props":643,"children":645},{"className":89,"code":644,"language":91,"meta":7},"Team::users()->select(['users.name', 'users.email'])->get();\n",[646],{"type":26,"tag":44,"props":647,"children":648},{"__ignoreMap":7},[649],{"type":26,"tag":97,"props":650,"children":651},{"class":99,"line":100},[652,656,660,664,668,672,676,680,684,689,693,697,701,706,710,714,718,722],{"type":26,"tag":97,"props":653,"children":654},{"class":184},[655],{"type":39,"value":187},{"type":26,"tag":97,"props":657,"children":658},{"class":104},[659],{"type":39,"value":339},{"type":26,"tag":97,"props":661,"children":662},{"class":125},[663],{"type":39,"value":243},{"type":26,"tag":97,"props":665,"children":666},{"class":110},[667],{"type":39,"value":348},{"type":26,"tag":97,"props":669,"children":670},{"class":104},[671],{"type":39,"value":171},{"type":26,"tag":97,"props":673,"children":674},{"class":125},[675],{"type":39,"value":523},{"type":26,"tag":97,"props":677,"children":678},{"class":110},[679],{"type":39,"value":528},{"type":26,"tag":97,"props":681,"children":682},{"class":531},[683],{"type":39,"value":534},{"type":26,"tag":97,"props":685,"children":686},{"class":537},[687],{"type":39,"value":688},"users.name",{"type":26,"tag":97,"props":690,"children":691},{"class":531},[692],{"type":39,"value":534},{"type":26,"tag":97,"props":694,"children":695},{"class":110},[696],{"type":39,"value":548},{"type":26,"tag":97,"props":698,"children":699},{"class":531},[700],{"type":39,"value":534},{"type":26,"tag":97,"props":702,"children":703},{"class":537},[704],{"type":39,"value":705},"users.email",{"type":26,"tag":97,"props":707,"children":708},{"class":531},[709],{"type":39,"value":534},{"type":26,"tag":97,"props":711,"children":712},{"class":110},[713],{"type":39,"value":566},{"type":26,"tag":97,"props":715,"children":716},{"class":104},[717],{"type":39,"value":171},{"type":26,"tag":97,"props":719,"children":720},{"class":125},[721],{"type":39,"value":575},{"type":26,"tag":97,"props":723,"children":724},{"class":110},[725],{"type":39,"value":580},{"type":26,"tag":31,"props":727,"children":728},{},[729,731,736],{"type":39,"value":730},"The same idea apply when you need to add a ",{"type":26,"tag":44,"props":732,"children":733},{},[734],{"type":39,"value":735},"where",{"type":39,"value":737}," method",{"type":26,"tag":87,"props":739,"children":741},{"className":89,"code":740,"language":91,"meta":7},"Team::users()->where('users.email', $request->get('email'))->get();\n",[742],{"type":26,"tag":44,"props":743,"children":744},{"__ignoreMap":7},[745],{"type":26,"tag":97,"props":746,"children":747},{"class":99,"line":100},[748,752,756,760,764,768,772,776,780,784,788,793,797,801,805,809,813,817,822,826,830],{"type":26,"tag":97,"props":749,"children":750},{"class":184},[751],{"type":39,"value":187},{"type":26,"tag":97,"props":753,"children":754},{"class":104},[755],{"type":39,"value":339},{"type":26,"tag":97,"props":757,"children":758},{"class":125},[759],{"type":39,"value":243},{"type":26,"tag":97,"props":761,"children":762},{"class":110},[763],{"type":39,"value":348},{"type":26,"tag":97,"props":765,"children":766},{"class":104},[767],{"type":39,"value":171},{"type":26,"tag":97,"props":769,"children":770},{"class":125},[771],{"type":39,"value":735},{"type":26,"tag":97,"props":773,"children":774},{"class":110},[775],{"type":39,"value":181},{"type":26,"tag":97,"props":777,"children":778},{"class":531},[779],{"type":39,"value":534},{"type":26,"tag":97,"props":781,"children":782},{"class":537},[783],{"type":39,"value":705},{"type":26,"tag":97,"props":785,"children":786},{"class":531},[787],{"type":39,"value":534},{"type":26,"tag":97,"props":789,"children":790},{"class":110},[791],{"type":39,"value":792},", $request",{"type":26,"tag":97,"props":794,"children":795},{"class":104},[796],{"type":39,"value":171},{"type":26,"tag":97,"props":798,"children":799},{"class":125},[800],{"type":39,"value":575},{"type":26,"tag":97,"props":802,"children":803},{"class":110},[804],{"type":39,"value":181},{"type":26,"tag":97,"props":806,"children":807},{"class":531},[808],{"type":39,"value":534},{"type":26,"tag":97,"props":810,"children":811},{"class":537},[812],{"type":39,"value":557},{"type":26,"tag":97,"props":814,"children":815},{"class":531},[816],{"type":39,"value":534},{"type":26,"tag":97,"props":818,"children":819},{"class":110},[820],{"type":39,"value":821},"))",{"type":26,"tag":97,"props":823,"children":824},{"class":104},[825],{"type":39,"value":171},{"type":26,"tag":97,"props":827,"children":828},{"class":125},[829],{"type":39,"value":575},{"type":26,"tag":97,"props":831,"children":832},{"class":110},[833],{"type":39,"value":580},{"type":26,"tag":31,"props":835,"children":836},{},[837],{"type":39,"value":838},"Thanks for reading!",{"type":26,"tag":840,"props":841,"children":842},"style",{},[843],{"type":39,"value":844},".dracula{color:#F8F8F2;background:#282A36;}.ct-166232{color:#FF79C6;}.ct-183901{color:#F8F8F2;}.ct-711500{color:#50FA7B;}.ct-531775{color:#BD93F9;font-style:italic;}.ct-432594{color:#8BE9FD;font-style:italic;}.ct-531774{color:#BD93F9;}.ct-882767{color:#E9F284;}.ct-035036{color:#F1FA8C;}",{"title":7,"searchDepth":136,"depth":136,"links":846},[847,848],{"id":82,"depth":136,"text":85},{"id":209,"depth":136,"text":212},"markdown","content:blog:12-fix-ambiguous-column-eloquent-exception.md","content","blog/12-fix-ambiguous-column-eloquent-exception.md","md",1697073120040]